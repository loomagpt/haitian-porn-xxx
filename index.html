<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haitian Tube - Video Sharing Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #ff0000;
            --primary-dark: #cc0000;
            --secondary-color: #065fd4;
            --dark-bg: #0f0f0f;
            --dark-surface: #212121;
            --dark-surface-light: #3d3d3d;
            --dark-text: #f1f1f1;
            --dark-text-secondary: #aaa;
            --light-bg: #ffffff;
            --light-surface: #f9f9f9;
            --light-surface-dark: #f1f1f1;
            --light-text: #030303;
            --light-text-secondary: #606060;
            --shadow: 0 1px 2px rgba(0,0,0,0.1);
            --shadow-lg: 0 4px 8px rgba(0,0,0,0.2);
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--light-bg);
            color: var(--light-text);
            transition: var(--transition);
            overflow-x: hidden;
        }

        body.dark-mode {
            background-color: var(--dark-bg);
            color: var(--dark-text);
        }

        .hidden {
            display: none !important;
        }

        /* Header Styles */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 56px;
            padding: 0 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: var(--light-bg);
            box-shadow: var(--shadow);
            z-index: 1000;
            transition: var(--transition);
        }

        body.dark-mode header {
            background-color: var(--dark-bg);
            box-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .logo-icon {
            color: var(--primary-color);
            font-size: 28px;
        }

        .logo-text {
            font-size: 20px;
            font-weight: 700;
            color: var(--light-text);
        }

        body.dark-mode .logo-text {
            color: var(--dark-text);
        }

        .search-container {
            flex: 1;
            max-width: 600px;
            margin: 0 40px;
            display: flex;
        }

        .search-input {
            width: 100%;
            padding: 10px 16px;
            border: 1px solid #ccc;
            border-radius: 20px 0 0 20px;
            font-size: 16px;
            background-color: var(--light-bg);
            color: var(--light-text);
            transition: var(--transition);
        }

        body.dark-mode .search-input {
            background-color: var(--dark-surface);
            color: var(--dark-text);
            border-color: var(--dark-surface-light);
        }

        .search-button {
            padding: 10px 20px;
            background-color: var(--light-surface-dark);
            border: 1px solid #ccc;
            border-left: none;
            border-radius: 0 20px 20px 0;
            cursor: pointer;
            transition: var(--transition);
        }

        body.dark-mode .search-button {
            background-color: var(--dark-surface-light);
            border-color: var(--dark-surface-light);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .icon-button {
            background: none;
            border: none;
            font-size: 20px;
            color: var(--light-text);
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: var(--transition);
        }

        body.dark-mode .icon-button {
            color: var(--dark-text);
        }

        .icon-button:hover {
            background-color: rgba(0,0,0,0.1);
        }

        body.dark-mode .icon-button:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .upload-button {
            padding: 8px 16px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 20px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .upload-button:hover {
            background-color: var(--primary-dark);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            cursor: pointer;
        }

        /* Main Layout */
        .main-container {
            display: flex;
            margin-top: 56px;
            min-height: calc(100vh - 56px);
        }

        /* Sidebar */
        .sidebar {
            width: 240px;
            background-color: var(--light-bg);
            padding: 12px 0;
            overflow-y: auto;
            position: fixed;
            top: 56px;
            left: 0;
            height: calc(100vh - 56px);
            transition: var(--transition);
            z-index: 999;
        }

        body.dark-mode .sidebar {
            background-color: var(--dark-bg);
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 12px 24px;
            cursor: pointer;
            transition: var(--transition);
            color: var(--light-text);
        }

        body.dark-mode .sidebar-item {
            color: var(--dark-text);
        }

        .sidebar-item:hover {
            background-color: rgba(0,0,0,0.05);
        }

        body.dark-mode .sidebar-item:hover {
            background-color: rgba(255,255,255,0.05);
        }

        .sidebar-item.active {
            background-color: rgba(0,0,0,0.1);
            font-weight: 500;
        }

        body.dark-mode .sidebar-item.active {
            background-color: rgba(255,255,255,0.1);
        }

        .sidebar-icon {
            font-size: 20px;
            width: 24px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 240px;
            padding: 20px;
            transition: var(--transition);
        }

        /* View Container */
        .view-container {
            min-height: calc(100vh - 96px);
        }

        /* Home View */
        .videos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .video-card {
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        body.dark-mode .video-card {
            background-color: var(--dark-surface);
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .video-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .video-thumbnail {
            width: 100%;
            height: 160px;
            object-fit: cover;
            background-color: #ddd;
            position: relative;
        }

        body.dark-mode .video-thumbnail {
            background-color: #333;
        }

        .video-info {
            padding: 12px;
        }

        .video-title {
            font-weight: 500;
            margin-bottom: 8px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            height: 40px;
        }

        .video-creator {
            font-size: 14px;
            color: var(--light-text-secondary);
            margin-bottom: 4px;
        }

        body.dark-mode .video-creator {
            color: var(--dark-text-secondary);
        }

        .video-stats {
            font-size: 14px;
            color: var(--light-text-secondary);
            display: flex;
            gap: 8px;
        }

        body.dark-mode .video-stats {
            color: var(--dark-text-secondary);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--light-text-secondary);
        }

        body.dark-mode .empty-state {
            color: var(--dark-text-secondary);
        }

        .empty-icon {
            font-size: 80px;
            margin-bottom: 20px;
            color: #ccc;
        }

        .empty-state h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .empty-state p {
            font-size: 16px;
            max-width: 500px;
            margin: 0 auto 20px;
        }

        /* Creator Page */
        .creator-header {
            background-color: var(--light-surface);
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        body.dark-mode .creator-header {
            background-color: var(--dark-surface);
        }

        .channel-banner {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .channel-banner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .channel-avatar-container {
            position: absolute;
            bottom: -50px;
            left: 20px;
            display: flex;
            align-items: flex-end;
            gap: 20px;
        }

        .channel-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            font-weight: 500;
            border: 4px solid var(--light-bg);
            overflow: hidden;
            position: relative;
        }

        .channel-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        body.dark-mode .channel-avatar {
            border-color: var(--dark-bg);
        }

        .channel-edit-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            opacity: 0;
            transition: opacity 0.3s;
            cursor: pointer;
            border-radius: 50%;
        }

        .channel-avatar:hover .channel-edit-overlay {
            opacity: 1;
        }

        .channel-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .channel-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 0;
        }

        .channel-stats {
            display: flex;
            gap: 20px;
            color: var(--light-text-secondary);
        }

        body.dark-mode .channel-stats {
            color: var(--dark-text-secondary);
        }

        .channel-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
            margin-top: 60px;
        }

        body.dark-mode .channel-tabs {
            border-bottom-color: var(--dark-surface-light);
        }

        .tab-button {
            padding: 12px 24px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 500;
            color: var(--light-text-secondary);
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }

        body.dark-mode .tab-button {
            color: var(--dark-text-secondary);
        }

        .tab-button.active {
            color: var(--light-text);
            border-bottom-color: var(--primary-color);
        }

        body.dark-mode .tab-button.active {
            color: var(--dark-text);
        }

        .tab-content {
            padding: 20px 0;
        }

        /* Channel Edit Modal */
        .channel-edit-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .channel-edit-modal.active {
            display: flex;
        }

        .channel-edit-content {
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 500px;
            padding: 30px;
            box-shadow: var(--shadow-lg);
        }

        body.dark-mode .channel-edit-content {
            background-color: var(--dark-surface);
        }

        .channel-edit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .channel-edit-header h2 {
            font-size: 24px;
        }

        .close-button {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--light-text);
        }

        body.dark-mode .close-button {
            color: var(--dark-text);
        }

        .channel-edit-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-weight: 500;
        }

        .form-input {
            padding: 12px 16px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 16px;
            transition: var(--transition);
            background-color: var(--light-bg);
            color: var(--light-text);
        }

        body.dark-mode .form-input {
            background-color: var(--dark-surface);
            color: var(--dark-text);
            border-color: var(--dark-surface-light);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .upload-preview {
            width: 100%;
            max-width: 200px;
            border-radius: 8px;
            margin: 10px auto;
            display: block;
        }

        .preview-container {
            text-align: center;
        }

        /* Authentication Views */
        .auth-container {
            max-width: 400px;
            margin: 40px auto;
            padding: 30px;
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
        }

        body.dark-mode .auth-container {
            background-color: var(--dark-surface);
        }

        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-header h2 {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .auth-button {
            padding: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 10px;
        }

        .auth-button:hover {
            background-color: var(--primary-dark);
        }

        .auth-footer {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }

        body.dark-mode .auth-footer {
            border-top-color: var(--dark-surface-light);
        }

        .auth-link {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
        }

        .auth-link:hover {
            text-decoration: underline;
        }

        /* Age Verification Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal {
            background-color: var(--light-bg);
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 500px;
            padding: 30px;
            box-shadow: var(--shadow-lg);
        }

        body.dark-mode .modal {
            background-color: var(--dark-surface);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .modal-content {
            margin-bottom: 30px;
        }

        .modal-actions {
            display: flex;
            gap: 16px;
        }

        .modal-button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .confirm-button {
            background-color: var(--primary-color);
            color: white;
        }

        .confirm-button:hover {
            background-color: var(--primary-dark);
        }

        .cancel-button {
            background-color: var(--light-surface-dark);
            color: var(--light-text);
        }

        body.dark-mode .cancel-button {
            background-color: var(--dark-surface-light);
            color: var(--dark-text);
        }

        /* Upload View */
        .upload-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .upload-area {
            border: 2px dashed #ccc;
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 30px;
            transition: var(--transition);
        }

        body.dark-mode .upload-area {
            border-color: var(--dark-surface-light);
        }

        .upload-area.drag-over {
            border-color: var(--primary-color);
            background-color: rgba(255, 0, 0, 0.05);
        }

        .upload-icon {
            font-size: 60px;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .upload-input {
            display: none;
        }

        /* Dashboard & Earnings */
        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background-color: var(--light-surface);
            padding: 24px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        body.dark-mode .dashboard-card {
            background-color: var(--dark-surface);
        }

        .card-title {
            font-size: 14px;
            color: var(--light-text-secondary);
            margin-bottom: 8px;
        }

        body.dark-mode .card-title {
            color: var(--dark-text-secondary);
        }

        .card-value {
            font-size: 32px;
            font-weight: 700;
        }

        .card-subvalue {
            font-size: 14px;
            color: var(--light-text-secondary);
        }

        body.dark-mode .card-subvalue {
            color: var(--dark-text-secondary);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                width: 280px;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .search-container {
                margin: 0 10px;
            }
            
            .videos-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
            
            .channel-info {
                text-align: center;
                margin-top: 60px;
            }
            
            .modal-actions {
                flex-direction: column;
            }
        }

        /* Mobile Menu Button */
        .menu-button {
            display: none;
            background: none;
            border: none;
            font-size: 20px;
            color: var(--light-text);
            cursor: pointer;
            padding: 8px;
        }

        body.dark-mode .menu-button {
            color: var(--dark-text);
        }

        @media (max-width: 768px) {
            .menu-button {
                display: block;
            }
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0,0,0,0.1);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 16px 24px;
            background-color: var(--light-surface);
            color: var(--light-text);
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            z-index: 3000;
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        body.dark-mode .toast {
            background-color: var(--dark-surface);
            color: var(--dark-text);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast-success {
            border-left: 4px solid #4caf50;
        }

        .toast-error {
            border-left: 4px solid #f44336;
        }

        .toast-info {
            border-left: 4px solid #2196f3;
        }

        /* File Upload Previews */
        .file-upload-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }

        .file-preview {
            max-width: 300px;
            border-radius: 8px;
            display: none;
        }

        .file-preview.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Age Verification Modal -->
    <div id="ageVerificationModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2>Age Verification Required</h2>
                <p>You must be 18 or older to use Haitian Tube</p>
            </div>
            <div class="modal-content">
                <p>Haitian Tube is committed to providing a safe environment for all users. By confirming your age, you agree that you are at least 18 years old and can access all content on the platform.</p>
                <p>Your age confirmation will be stored securely and used only for content restriction purposes.</p>
            </div>
            <div class="modal-actions">
                <button id="confirmAge" class="modal-button confirm-button">I am 18 or older</button>
                <button id="cancelAge" class="modal-button cancel-button">I am under 18</button>
            </div>
        </div>
    </div>

    <!-- Channel Edit Modal -->
    <div id="channelEditModal" class="channel-edit-modal">
        <div class="channel-edit-content">
            <div class="channel-edit-header">
                <h2>Edit Channel</h2>
                <button class="close-button" id="closeChannelEdit">&times;</button>
            </div>
            <form id="channelEditForm" class="channel-edit-form">
                <div class="form-group">
                    <label class="form-label" for="channelNameInput">Channel Name</label>
                    <input type="text" class="form-input" id="channelNameInput" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="channelDescriptionInput">Channel Description</label>
                    <textarea class="form-input" id="channelDescriptionInput" rows="4"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Profile Picture</label>
                    <input type="file" class="upload-input" id="profilePictureUpload" accept="image/*">
                    <div class="preview-container">
                        <img id="profilePicturePreview" class="upload-preview" style="display: none;">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Cover Photo</label>
                    <input type="file" class="upload-input" id="coverPhotoUpload" accept="image/*">
                    <div class="preview-container">
                        <img id="coverPhotoPreview" class="upload-preview" style="display: none;">
                    </div>
                </div>
                <button type="submit" class="auth-button">Save Changes</button>
            </form>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="logo-container">
            <button class="menu-button" id="menuButton">
                <i class="fas fa-bars"></i>
            </button>
            <i class="fas fa-play-circle logo-icon"></i>
            <span class="logo-text">Haitian Tube</span>
        </div>
        
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="Search videos...">
            <button class="search-button" id="searchButton">
                <i class="fas fa-search"></i>
            </button>
        </div>
        
        <div class="header-actions">
            <button class="icon-button" id="darkModeToggle">
                <i class="fas fa-moon"></i>
            </button>
            <button class="upload-button" id="uploadButton" style="display: none;">Upload</button>
            <div class="user-avatar" id="userAvatar">?</div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="main-container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-item active" data-view="home">
                <i class="fas fa-home sidebar-icon"></i>
                <span>Home</span>
            </div>
            <div class="sidebar-item" data-view="trending">
                <i class="fas fa-fire sidebar-icon"></i>
                <span>Trending</span>
            </div>
            <div class="sidebar-item" data-view="subscriptions">
                <i class="fas fa-newspaper sidebar-icon"></i>
                <span>Subscriptions</span>
            </div>
            <div class="sidebar-item" data-view="library">
                <i class="fas fa-photo-video sidebar-icon"></i>
                <span>Library</span>
            </div>
            <div class="sidebar-item" data-view="history">
                <i class="fas fa-history sidebar-icon"></i>
                <span>History</span>
            </div>
            <div class="sidebar-item" id="myChannelItem">
                <i class="fas fa-user-circle sidebar-icon"></i>
                <span>My Channel</span>
            </div>
            <div class="sidebar-item" id="dashboardItem">
                <i class="fas fa-chart-line sidebar-icon"></i>
                <span>Dashboard</span>
            </div>
            <div class="sidebar-item" id="loginItem">
                <i class="fas fa-sign-in-alt sidebar-icon"></i>
                <span>Sign In</span>
            </div>
            <div class="sidebar-item" id="logoutItem">
                <i class="fas fa-sign-out-alt sidebar-icon"></i>
                <span>Log Out</span>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="view-container" id="viewContainer">
                <!-- Home View (Default) -->
                <div class="view" id="homeView">
                    <!-- Ad Banner -->
                    <div class="ad-banner">
                        <a href="https://t.ajrkm1.com/387067/8780/0?bo=2779,2778,2777,2776,2775&file_id=600151&po=6533&aff_sub5=SF_006OG000004lmDN" target="_blank">
                            <img src="https://www.imglnkx.com/8780/PMKT-1157_DESIGN-16618_BannersWebinar_HBD_300100.gif" alt="CrackRevenue Banner" width="300" height="100">
                        </a>
                    </div>
                    
                    <h1>Recommended Videos</h1>
                    <div class="videos-grid" id="homeVideosGrid">
                        <!-- Videos will be inserted here -->
                    </div>
                </div>

                <!-- Creator Page View -->
                <div class="view hidden" id="creatorView">
                    <div class="creator-header">
                        <div class="channel-banner" id="channelBanner">
                            <!-- Banner image will be inserted here -->
                        </div>
                        <div class="channel-avatar-container">
                            <div class="channel-avatar" id="channelAvatar">
                                <div class="channel-edit-overlay" id="editChannelBtn">
                                    <i class="fas fa-camera"></i>
                                </div>
                            </div>
                            <div class="channel-info">
                                <h1 class="channel-name" id="channelName">Creator Name</h1>
                                <div class="channel-stats">
                                    <span id="channelSubscribers">0 subscribers</span>
                                    <span id="channelVideos">0 videos</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="channel-tabs">
                        <button class="tab-button active" data-tab="videos">Videos</button>
                        <button class="tab-button" data-tab="about">About</button>
                    </div>
                    
                    <div class="tab-content">
                        <div class="tab-pane active" id="videosTab">
                            <div class="videos-grid" id="creatorVideosGrid">
                                <!-- Creator's videos will be inserted here -->
                            </div>
                        </div>
                        <div class="tab-pane hidden" id="aboutTab">
                            <div class="about-content">
                                <h3>About</h3>
                                <p id="channelDescription">No description available.</p>
                                <h4>Channel Details</h4>
                                <p><strong>Joined:</strong> <span id="channelJoined">Not available</span></p>
                                <p><strong>Total Views:</strong> <span id="channelTotalViews">0</span></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Authentication Views -->
                <div class="view hidden" id="authView">
                    <div class="auth-container">
                        <div class="auth-header">
                            <i class="fas fa-play-circle" style="font-size: 48px; color: var(--primary-color); margin-bottom: 16px;"></i>
                            <h2 id="authTitle">Sign In</h2>
                            <p id="authSubtitle">to continue to Haitian Tube</p>
                        </div>
                        
                        <form class="auth-form" id="authForm">
                            <div class="form-group" id="usernameGroup">
                                <label class="form-label" for="authUsername">Username</label>
                                <input type="text" class="form-input" id="authUsername" placeholder="Enter your username" required>
                            </div>
                            
                            <div class="form-group" id="emailGroup">
                                <label class="form-label" for="authEmail">Email</label>
                                <input type="email" class="form-input" id="authEmail" placeholder="Enter your email" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="authPassword">Password</label>
                                <input type="password" class="form-input" id="authPassword" placeholder="Enter your password" required>
                            </div>
                            
                            <button type="submit" class="auth-button" id="authSubmitButton">Sign In</button>
                        </form>
                        
                        <div class="auth-footer">
                            <p id="authFooterText">
                                <span id="authToggleText">Don't have an account?</span>
                                <a class="auth-link" id="authToggleLink">Sign up now</a>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Upload View -->
                <div class="view hidden" id="uploadView">
                    <div class="upload-container">
                        <h1>Upload Video</h1>
                        <p>Upload a video to your channel</p>
                        
                        <div class="upload-area" id="uploadArea">
                            <i class="fas fa-cloud-upload-alt upload-icon"></i>
                            <h3>Drag and drop video files</h3>
                            <p>or click to browse files</p>
                            <input type="file" class="upload-input" id="videoUpload" accept="video/*" required>
                            <p style="margin-top: 20px; font-size: 14px; color: var(--light-text-secondary);">
                                MP4, WebM, or AVI files up to 2GB
                            </p>
                        </div>
                        
                        <div class="file-upload-container">
                            <div id="videoPreview"></div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="videoTitle">Video Title</label>
                            <input type="text" class="form-input" id="videoTitle" placeholder="Enter a title for your video" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="videoDescription">Description</label>
                            <textarea class="form-input" id="videoDescription" rows="4" placeholder="Describe your video"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="thumbnailUpload">Thumbnail</label>
                            <input type="file" class="upload-input" id="thumbnailUpload" accept="image/*">
                            <div id="thumbnailPreview" style="margin-top: 10px;"></div>
                        </div>
                        
                        <button class="auth-button" id="submitUpload">Upload Video</button>
                    </div>
                </div>

                <!-- Dashboard View -->
                <div class="view hidden" id="dashboardView">
                    <div class="dashboard-container">
                        <h1>Creator Dashboard</h1>
                        <p>Track your channel's performance</p>
                        
                        <div class="dashboard-cards">
                            <div class="dashboard-card">
                                <div class="card-title">Total Views</div>
                                <div class="card-value" id="totalViews">0</div>
                                <div class="card-subvalue" id="subscribersCount">0 subscribers</div>
                            </div>
                            
                            <div class="dashboard-card">
                                <div class="card-title">Total Videos</div>
                                <div class="card-value" id="totalVideos">0</div>
                                <div class="card-subvalue">On your channel</div>
                            </div>
                            
                            <div class="dashboard-card">
                                <div class="card-title">Channel Status</div>
                                <div class="card-value" style="font-size: 24px;">Active</div>
                                <div class="card-subvalue">Ready for uploads</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 40px;">
                            <h2>Recent Videos</h2>
                            <div id="videosPerformance">
                                <p>No videos uploaded yet.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notification -->
    <div class="toast hidden" id="toast">
        <i class="fas fa-info-circle" id="toastIcon"></i>
        <span id="toastMessage">This is a toast message</span>
    </div>

    <script>
        // Platform State
        const platformState = {
            currentUser: null,
            currentView: 'home',
            isAuthenticated: false,
            ageVerified: false,
            videos: [],
            creators: [],
            currentCreator: null,
            currentVideo: null,
            isDarkMode: false
        };
        
        // DOM Elements
        const elements = {
            // Views
            homeView: document.getElementById('homeView'),
            creatorView: document.getElementById('creatorView'),
            authView: document.getElementById('authView'),
            uploadView: document.getElementById('uploadView'),
            dashboardView: document.getElementById('dashboardView'),
            viewContainer: document.getElementById('viewContainer'),
            
            // Age verification
            ageVerificationModal: document.getElementById('ageVerificationModal'),
            confirmAge: document.getElementById('confirmAge'),
            cancelAge: document.getElementById('cancelAge'),
            
            // Channel edit modal
            channelEditModal: document.getElementById('channelEditModal'),
            closeChannelEdit: document.getElementById('closeChannelEdit'),
            channelEditForm: document.getElementById('channelEditForm'),
            channelNameInput: document.getElementById('channelNameInput'),
            channelDescriptionInput: document.getElementById('channelDescriptionInput'),
            profilePictureUpload: document.getElementById('profilePictureUpload'),
            profilePicturePreview: document.getElementById('profilePicturePreview'),
            coverPhotoUpload: document.getElementById('coverPhotoUpload'),
            coverPhotoPreview: document.getElementById('coverPhotoPreview'),
            
            // Header
            menuButton: document.getElementById('menuButton'),
            sidebar: document.getElementById('sidebar'),
            darkModeToggle: document.getElementById('darkModeToggle'),
            uploadButton: document.getElementById('uploadButton'),
            userAvatar: document.getElementById('userAvatar'),
            searchInput: document.getElementById('searchInput'),
            searchButton: document.getElementById('searchButton'),
            
            // Sidebar items
            myChannelItem: document.getElementById('myChannelItem'),
            dashboardItem: document.getElementById('dashboardItem'),
            loginItem: document.getElementById('loginItem'),
            logoutItem: document.getElementById('logoutItem'),
            
            // Video grids
            homeVideosGrid: document.getElementById('homeVideosGrid'),
            creatorVideosGrid: document.getElementById('creatorVideosGrid'),
            
            // Creator page
            channelBanner: document.getElementById('channelBanner'),
            channelAvatar: document.getElementById('channelAvatar'),
            channelName: document.getElementById('channelName'),
            channelSubscribers: document.getElementById('channelSubscribers'),
            channelVideos: document.getElementById('channelVideos'),
            channelDescription: document.getElementById('channelDescription'),
            channelJoined: document.getElementById('channelJoined'),
            channelTotalViews: document.getElementById('channelTotalViews'),
            editChannelBtn: document.getElementById('editChannelBtn'),
            
            // Authentication
            authTitle: document.getElementById('authTitle'),
            authSubtitle: document.getElementById('authSubtitle'),
            authForm: document.getElementById('authForm'),
            authUsername: document.getElementById('authUsername'),
            authEmail: document.getElementById('authEmail'),
            usernameGroup: document.getElementById('usernameGroup'),
            emailGroup: document.getElementById('emailGroup'),
            authPassword: document.getElementById('authPassword'),
            authSubmitButton: document.getElementById('authSubmitButton'),
            authFooterText: document.getElementById('authFooterText'),
            authToggleText: document.getElementById('authToggleText'),
            authToggleLink: document.getElementById('authToggleLink'),
            
            // Upload
            uploadArea: document.getElementById('uploadArea'),
            videoUpload: document.getElementById('videoUpload'),
            videoPreview: document.getElementById('videoPreview'),
            videoTitle: document.getElementById('videoTitle'),
            videoDescription: document.getElementById('videoDescription'),
            thumbnailUpload: document.getElementById('thumbnailUpload'),
            thumbnailPreview: document.getElementById('thumbnailPreview'),
            submitUpload: document.getElementById('submitUpload'),
            
            // Dashboard
            totalViews: document.getElementById('totalViews'),
            subscribersCount: document.getElementById('subscribersCount'),
            totalVideos: document.getElementById('totalVideos'),
            videosPerformance: document.getElementById('videosPerformance'),
            
            // Toast
            toast: document.getElementById('toast'),
            toastIcon: document.getElementById('toastIcon'),
            toastMessage: document.getElementById('toastMessage'),
            
            // Tab buttons
            tabButtons: document.querySelectorAll('.tab-button')
        };
        
        // Initialize the platform
        function initPlatform() {
            // Check if age is verified in localStorage
            const ageVerified = localStorage.getItem('haitianTubeAgeVerified');
            if (ageVerified === 'true') {
                platformState.ageVerified = true;
                elements.ageVerificationModal.style.display = 'none';
            } else {
                elements.ageVerificationModal.style.display = 'flex';
            }
            
            // Check for dark mode preference
            const darkModePreference = localStorage.getItem('haitianTubeDarkMode');
            if (darkModePreference === 'true') {
                enableDarkMode();
            }
            
            // Check for existing user session
            const savedUser = localStorage.getItem('haitianTubeUser');
            if (savedUser) {
                try {
                    platformState.currentUser = JSON.parse(savedUser);
                    platformState.isAuthenticated = true;
                    updateAuthUI();
                } catch (e) {
                    console.error('Error parsing saved user:', e);
                }
            }
            
            // Load videos from localStorage
            const savedVideos = localStorage.getItem('haitianTubeVideos');
            if (savedVideos) {
                try {
                    platformState.videos = JSON.parse(savedVideos);
                } catch (e) {
                    console.error('Error parsing saved videos:', e);
                }
            }
            
            // Load creators from localStorage
            const savedCreators = localStorage.getItem('haitianTubeCreators');
            if (savedCreators) {
                try {
                    platformState.creators = JSON.parse(savedCreators);
                } catch (e) {
                    console.error('Error parsing saved creators:', e);
                }
            }
            
            // Set up event listeners
            setupEventListeners();
            
            // Show home view by default
            switchView('home');
        }
        
        // Set up all event listeners
        function setupEventListeners() {
            // Age verification
            elements.confirmAge.addEventListener('click', confirmAgeVerification);
            elements.cancelAge.addEventListener('click', cancelAgeVerification);
            
            // Header actions
            elements.menuButton.addEventListener('click', toggleSidebar);
            elements.darkModeToggle.addEventListener('click', toggleDarkMode);
            elements.uploadButton.addEventListener('click', () => {
                if (platformState.isAuthenticated) {
                    switchView('upload');
                } else {
                    switchView('auth');
                }
            });
            elements.userAvatar.addEventListener('click', () => {
                if (platformState.isAuthenticated) {
                    switchView('dashboard');
                } else {
                    switchView('auth');
                }
            });
            elements.searchButton.addEventListener('click', handleSearch);
            elements.searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleSearch();
            });
            
            // Sidebar navigation
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', () => {
                    const view = item.dataset.view;
                    if (view) {
                        switchView(view);
                        if (window.innerWidth <= 768) {
                            elements.sidebar.classList.remove('active');
                        }
                    }
                    
                    // Update active state in sidebar
                    document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                });
            });
            
            // My Channel navigation
            elements.myChannelItem.addEventListener('click', () => {
                if (platformState.isAuthenticated) {
                    platformState.currentCreator = platformState.currentUser;
                    loadCreatorPage(platformState.currentUser.id);
                    switchView('creator');
                } else {
                    switchView('auth');
                }
                
                if (window.innerWidth <= 768) {
                    elements.sidebar.classList.remove('active');
                }
            });
            
            // Dashboard navigation
            elements.dashboardItem.addEventListener('click', () => {
                if (platformState.isAuthenticated) {
                    switchView('dashboard');
                } else {
                    switchView('auth');
                }
                
                if (window.innerWidth <= 768) {
                    elements.sidebar.classList.remove('active');
                }
            });
            
            // Login/Logout navigation
            elements.loginItem.addEventListener('click', () => {
                switchView('auth');
                if (window.innerWidth <= 768) {
                    elements.sidebar.classList.remove('active');
                }
            });
            
            elements.logoutItem.addEventListener('click', () => {
                logout();
                if (window.innerWidth <= 768) {
                    elements.sidebar.classList.remove('active');
                }
            });
            
            // Channel edit
            elements.editChannelBtn.addEventListener('click', openChannelEdit);
            elements.closeChannelEdit.addEventListener('click', closeChannelEdit);
            elements.channelEditForm.addEventListener('submit', handleChannelEdit);
            
            // Profile picture upload
            elements.profilePictureUpload.addEventListener('change', (e) => {
                handleImageUpload(e, elements.profilePicturePreview);
            });
            
            // Cover photo upload
            elements.coverPhotoUpload.addEventListener('change', (e) => {
                handleImageUpload(e, elements.coverPhotoPreview);
            });
            
            // Authentication form
            elements.authForm.addEventListener('submit', handleAuthSubmit);
            elements.authToggleLink.addEventListener('click', toggleAuthMode);
            
            // Upload functionality
            elements.uploadArea.addEventListener('click', () => elements.videoUpload.click());
            elements.videoUpload.addEventListener('change', handleVideoUpload);
            elements.submitUpload.addEventListener('click', handleVideoSubmit);
            
            // Drag and drop for upload
            elements.uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                elements.uploadArea.classList.add('drag-over');
            });
            
            elements.uploadArea.addEventListener('dragleave', () => {
                elements.uploadArea.classList.remove('drag-over');
            });
            
            elements.uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                elements.uploadArea.classList.remove('drag-over');
                
                if (e.dataTransfer.files.length) {
                    elements.videoUpload.files = e.dataTransfer.files;
                    handleVideoUpload();
                }
            });
            
            // Thumbnail upload
            elements.thumbnailUpload.addEventListener('change', handleThumbnailUpload);
            
            // Creator page tabs
            elements.tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tab = button.dataset.tab;
                    switchCreatorTab(tab);
                    
                    // Update active tab button
                    elements.tabButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                });
            });
        }
        
        // Age verification functions
        function confirmAgeVerification() {
            platformState.ageVerified = true;
            localStorage.setItem('haitianTubeAgeVerified', 'true');
            elements.ageVerificationModal.style.display = 'none';
            showToast('Age verification confirmed. Welcome to Haitian Tube!', 'success');
        }
        
        function cancelAgeVerification() {
            showToast('You must be 18 or older to use Haitian Tube.', 'error');
        }
        
        // View switching
        function switchView(viewName) {
            // Hide all views
            document.querySelectorAll('.view').forEach(view => {
                view.classList.add('hidden');
            });
            
            // Update sidebar active state
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.view === viewName) {
                    item.classList.add('active');
                }
            });
            
            // Show the requested view
            platformState.currentView = viewName;
            
            switch(viewName) {
                case 'home':
                    elements.homeView.classList.remove('hidden');
                    loadHomeVideos();
                    break;
                case 'creator':
                    elements.creatorView.classList.remove('hidden');
                    break;
                case 'auth':
                    elements.authView.classList.remove('hidden');
                    break;
                case 'upload':
                    if (platformState.isAuthenticated) {
                        elements.uploadView.classList.remove('hidden');
                        resetUploadForm();
                    } else {
                        switchView('auth');
                    }
                    break;
                case 'dashboard':
                    if (platformState.isAuthenticated) {
                        elements.dashboardView.classList.remove('hidden');
                        loadDashboardData();
                    } else {
                        switchView('auth');
                    }
                    break;
                default:
                    elements.homeView.classList.remove('hidden');
            }
        }
        
        // Load home videos
        function loadHomeVideos() {
            elements.homeVideosGrid.innerHTML = '';
            
            if (platformState.videos.length > 0) {
                platformState.videos.forEach(video => {
                    if (video.status === 'verified' || video.status === 'pending_verification') {
                        const videoCard = createVideoCard(video);
                        elements.homeVideosGrid.appendChild(videoCard);
                    }
                });
            } else {
                const emptyState = document.createElement('div');
                emptyState.className = 'empty-state';
                emptyState.innerHTML = `
                    <i class="fas fa-video empty-icon"></i>
                    <h2>No videos yet</h2>
                    <p>Be the first to upload a video to Haitian Tube!</p>
                `;
                elements.homeVideosGrid.appendChild(emptyState);
            }
        }
        
        // Create video card element
        function createVideoCard(video) {
            const card = document.createElement('div');
            card.className = 'video-card';
            card.dataset.videoId = video.id;
            
            const thumbnailStyle = video.thumbnailUrl 
                ? `background-image: url('${video.thumbnailUrl}'); background-size: cover; background-position: center;`
                : `background-color: ${video.color || '#6a11cb'}`;
            
            card.innerHTML = `
                <div class="video-thumbnail" style="${thumbnailStyle}">
                    <i class="fas fa-play-circle" style="font-size: 48px; color: rgba(255, 255, 255, 0.9); position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);"></i>
                    ${video.duration ? `<span style="position: absolute; bottom: 8px; right: 8px; background: rgba(0, 0, 0, 0.8); color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px;">${video.duration}</span>` : ''}
                    ${video.status === 'pending_verification' ? `<span style="position: absolute; top: 8px; left: 8px; background: rgba(255, 165, 0, 0.9); color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px;">Verifying...</span>` : ''}
                </div>
                <div class="video-info">
                    <h3 class="video-title">${video.title}</h3>
                    <p class="video-creator">${video.creatorName}</p>
                    <div class="video-stats">
                        <span>${formatNumber(video.views)} views</span>
                        <span></span>
                        <span>${video.uploadDate}</span>
                    </div>
                </div>
            `;
            
            card.addEventListener('click', () => {
                // Store current video for video player
                platformState.currentVideo = video;
                
                // Create and show video detail page
                showVideoDetailPage(video);
            });
            
            return card;
        }
        
        // Show video detail page
        function showVideoDetailPage(video) {
            // Create video player view
            const videoDetailHTML = `
                <div style="max-width: 1200px; margin: 0 auto;">
                    <div style="display: flex; gap: 24px; margin-bottom: 20px;">
                        <div style="flex: 1;">
                            <div style="background-color: ${video.color}; width: 100%; height: 500px; border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-play-circle" style="font-size: 80px; color: white;"></i>
                            </div>
                        </div>
                        <div style="width: 300px;">
                            <h3>Recommended Videos</h3>
                            ${platformState.videos.slice(0, 5).map(v => v.id !== video.id ? `
                                <div style="display: flex; gap: 12px; margin-bottom: 16px; cursor: pointer;" onclick="showVideoDetailPageById('${v.id}')">
                                    <div style="width: 160px; height: 90px; border-radius: 8px; background-color: ${v.color};"></div>
                                    <div style="flex: 1;">
                                        <h4 style="font-size: 14px; margin-bottom: 4px;">${v.title}</h4>
                                        <p style="font-size: 12px; color: var(--light-text-secondary);">${v.creatorName}</p>
                                        <p style="font-size: 12px; color: var(--light-text-secondary);">${formatNumber(v.views)} views</p>
                                    </div>
                                </div>
                            ` : '').join('')}
                        </div>
                    </div>
                    
                    <div style="background-color: var(--light-surface); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <h1 style="font-size: 24px; margin-bottom: 12px;">${video.title}</h1>
                        <div style="color: var(--light-text-secondary); margin-bottom: 20px;">
                            <span>${formatNumber(video.views)} views</span>
                            <span></span>
                            <span>${video.uploadDate}</span>
                        </div>
                        
                        <div style="display: flex; gap: 12px; margin-bottom: 20px;">
                            <button style="display: flex; align-items: center; gap: 8px; padding: 8px 16px; background-color: var(--light-surface-dark); border: none; border-radius: 20px; color: var(--light-text); cursor: pointer;">
                                <i class="fas fa-thumbs-up"></i>
                                <span>${video.likes || 0}</span>
                            </button>
                            <button style="display: flex; align-items: center; gap: 8px; padding: 8px 16px; background-color: var(--light-surface-dark); border: none; border-radius: 20px; color: var(--light-text); cursor: pointer;">
                                <i class="fas fa-thumbs-down"></i>
                                <span>${video.dislikes || 0}</span>
                            </button>
                            <button style="display: flex; align-items: center; gap: 8px; padding: 8px 16px; background-color: var(--light-surface-dark); border: none; border-radius: 20px; color: var(--light-text); cursor: pointer;">
                                <i class="fas fa-share"></i>
                                <span>Share</span>
                            </button>
                        </div>
                        
                        <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #eee;">
                            <div style="width: 50px; height: 50px; border-radius: 50%; background-color: ${getRandomColor()}; display: flex; align-items: center; justify-content: center; color: white; font-weight: 500;">
                                ${video.creatorName.charAt(0)}
                            </div>
                            <div style="flex: 1;">
                                <h3 style="margin-bottom: 4px;">${video.creatorName}</h3>
                                <p style="color: var(--light-text-secondary); font-size: 14px;">${platformState.currentUser?.subscribers || 0} subscribers</p>
                            </div>
                            <button style="padding: 10px 20px; background-color: var(--primary-color); color: white; border: none; border-radius: 20px; font-weight: 500; cursor: pointer;">
                                Subscribe
                            </button>
                        </div>
                        
                        <div style="background-color: var(--light-surface-dark); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
                            <p>${video.description || 'No description provided.'}</p>
                        </div>
                    </div>
                </div>
            `;
            
            // Create a new view for video detail
            const videoDetailView = document.createElement('div');
            videoDetailView.className = 'view';
            videoDetailView.id = 'videoDetailView';
            videoDetailView.innerHTML = videoDetailHTML;
            
            // Hide current view and show video detail
            elements.viewContainer.innerHTML = '';
            elements.viewContainer.appendChild(videoDetailView);
        }
        
        // Show video detail by ID
        function showVideoDetailPageById(videoId) {
            const video = platformState.videos.find(v => v.id === videoId);
            if (video) {
                platformState.currentVideo = video;
                showVideoDetailPage(video);
            }
        }
        
        // Handle video upload preview
        function handleVideoUpload() {
            const file = elements.videoUpload.files[0];
            if (!file) return;
            
            // Validate file type
            if (!file.type.startsWith('video/')) {
                showToast('Please select a video file', 'error');
                elements.videoUpload.value = '';
                return;
            }
            
            // Validate file size (2GB limit)
            if (file.size > 2 * 1024 * 1024 * 1024) {
                showToast('File too large. Maximum size is 2GB', 'error');
                elements.videoUpload.value = '';
                return;
            }
            
            // Create preview
            const video = document.createElement('video');
            video.controls = true;
            video.style.width = '100%';
            video.style.maxWidth = '300px';
            video.style.borderRadius = '8px';
            
            const source = document.createElement('source');
            source.src = URL.createObjectURL(file);
            source.type = file.type;
            
            video.appendChild(source);
            
            elements.videoPreview.innerHTML = '';
            elements.videoPreview.appendChild(video);
            
            showToast(`Video "${file.name}" selected for upload`, 'info');
        }
        
        // Handle thumbnail upload
        function handleThumbnailUpload() {
            const file = elements.thumbnailUpload.files[0];
            if (!file) return;
            
            // Validate file type
            if (!file.type.startsWith('image/')) {
                showToast('Please select an image file', 'error');
                return;
            }
            
            // Create preview
            const reader = new FileReader();
            reader.onload = (e) => {
                elements.thumbnailPreview.innerHTML = `<img src="${e.target.result}" alt="Thumbnail preview" style="max-width: 200px; border-radius: 8px;">`;
            };
            reader.readAsDataURL(file);
        }
        
        // Handle video submission
        function handleVideoSubmit() {
            const videoFile = elements.videoUpload.files[0];
            const title = elements.videoTitle.value;
            const description = elements.videoDescription.value;
            const thumbnailFile = elements.thumbnailUpload.files[0];

            if (!videoFile) {
                showToast('Please select a video file', 'error');
                return;
            }

            if (!title) {
                showToast('Please enter a video title', 'error');
                return;
            }

            // Create video object
            const newVideo = {
                id: 'video_' + Date.now(),
                title: title,
                description: description,
                creatorId: platformState.currentUser.id,
                creatorName: platformState.currentUser.name,
                views: 0,
                uploadDate: new Date().toLocaleDateString() + ' ' + new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}),
                color: getRandomColor(),
                status: 'pending_verification',
                likes: 0,
                dislikes: 0,
                comments: [],
                duration: '5:24'
            };

            // Handle thumbnail upload
            if (thumbnailFile) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    newVideo.thumbnailUrl = e.target.result;
                    saveVideo(newVideo);
                };
                reader.readAsDataURL(thumbnailFile);
            } else {
                saveVideo(newVideo);
            }
        }
        
        // Save video to platform
        function saveVideo(video) {
            // Add video to videos list
            platformState.videos.unshift(video);
            
            // Save to localStorage for persistence
            localStorage.setItem('haitianTubeVideos', JSON.stringify(platformState.videos));
            
            // Add creator to creators list if not exists
            if (!platformState.creators.find(c => c.id === platformState.currentUser.id)) {
                platformState.creators.push({
                    id: platformState.currentUser.id,
                    name: platformState.currentUser.name,
                    subscribers: 0,
                    totalViews: 0,
                    joinedDate: new Date().toLocaleDateString()
                });
                localStorage.setItem('haitianTubeCreators', JSON.stringify(platformState.creators));
            }
            
            showToast('Video uploaded successfully! AI verification in progress... Video is playable now.', 'success');
            
            // Simulate AI verification (10 seconds)
            setTimeout(() => {
                video.status = 'verified';
                localStorage.setItem('haitianTubeVideos', JSON.stringify(platformState.videos));
                showToast('Video verified and published!', 'success');
                
                // Refresh home page to show the video
                if (platformState.currentView === 'home') {
                    loadHomeVideos();
                }
            }, 10000);

            // Reset form
            resetUploadForm();
            
            // Switch to home view
            switchView('home');
        }
        
        // Reset upload form
        function resetUploadForm() {
            elements.videoTitle.value = '';
            elements.videoDescription.value = '';
            elements.videoUpload.value = '';
            elements.thumbnailUpload.value = '';
            elements.videoPreview.innerHTML = '';
            elements.thumbnailPreview.innerHTML = '';
            elements.uploadArea.classList.remove('drag-over');
        }
        
        // Open channel edit modal
        function openChannelEdit() {
            if (!platformState.currentUser) return;
            
            // Fill form with current data
            elements.channelNameInput.value = platformState.currentUser.name || '';
            elements.channelDescriptionInput.value = platformState.currentUser.description || '';
            
            // Show previews if images exist
            if (platformState.currentUser.profilePicture) {
                elements.profilePicturePreview.src = platformState.currentUser.profilePicture;
                elements.profilePicturePreview.style.display = 'block';
            }
            
            if (platformState.currentUser.coverPhoto) {
                elements.coverPhotoPreview.src = platformState.currentUser.coverPhoto;
                elements.coverPhotoPreview.style.display = 'block';
            }
            
            elements.channelEditModal.classList.add('active');
        }
        
        // Close channel edit modal
        function closeChannelEdit() {
            elements.channelEditModal.classList.remove('active');
        }
        
        // Handle channel edit form submission
        function handleChannelEdit(e) {
            e.preventDefault();
            
            if (!platformState.currentUser) return;
            
            // Update user data
            platformState.currentUser.name = elements.channelNameInput.value;
            platformState.currentUser.description = elements.channelDescriptionInput.value;
            
            // Save to localStorage
            localStorage.setItem('haitianTubeUser', JSON.stringify(platformState.currentUser));
            
            // Update creators list
            const creatorIndex = platformState.creators.findIndex(c => c.id === platformState.currentUser.id);
            if (creatorIndex !== -1) {
                platformState.creators[creatorIndex].name = platformState.currentUser.name;
                platformState.creators[creatorIndex].description = platformState.currentUser.description;
                localStorage.setItem('haitianTubeCreators', JSON.stringify(platformState.creators));
            }
            
            // Update current creator if viewing own channel
            if (platformState.currentCreator && platformState.currentCreator.id === platformState.currentUser.id) {
                platformState.currentCreator = platformState.currentUser;
                loadCreatorPage(platformState.currentUser.id);
            }
            
            // Update UI
            updateAuthUI();
            
            showToast('Channel updated successfully!', 'success');
            closeChannelEdit();
        }
        
        // Handle image upload for profile/cover
        function handleImageUpload(event, previewElement) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                showToast('Please select an image file', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = (e) => {
                previewElement.src = e.target.result;
                previewElement.style.display = 'block';
                
                // Save to user data
                if (previewElement.id === 'profilePicturePreview') {
                    platformState.currentUser.profilePicture = e.target.result;
                    localStorage.setItem('haitianTubeUser', JSON.stringify(platformState.currentUser));
                    
                    // Update avatar in UI
                    elements.userAvatar.innerHTML = `<img src="${e.target.result}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
                    
                    // Update channel avatar if viewing own channel
                    if (platformState.currentView === 'creator' && platformState.currentCreator && platformState.currentCreator.id === platformState.currentUser.id) {
                        elements.channelAvatar.innerHTML = `
                            <img src="${e.target.result}" alt="Profile" style="width: 100%; height: 100%; object-fit: cover;">
                            <div class="channel-edit-overlay" id="editChannelBtn">
                                <i class="fas fa-camera"></i>
                            </div>
                        `;
                        document.getElementById('editChannelBtn').addEventListener('click', openChannelEdit);
                    }
                } else if (previewElement.id === 'coverPhotoPreview') {
                    platformState.currentUser.coverPhoto = e.target.result;
                    localStorage.setItem('haitianTubeUser', JSON.stringify(platformState.currentUser));
                    
                    // Update channel banner if viewing own channel
                    if (platformState.currentView === 'creator' && platformState.currentCreator && platformState.currentCreator.id === platformState.currentUser.id) {
                        elements.channelBanner.innerHTML = `<img src="${e.target.result}" alt="Cover">`;
                    }
                }
            };
            reader.readAsDataURL(file);
        }
        
        // Load creator page
        function loadCreatorPage(creatorId) {
            const creator = platformState.currentCreator || platformState.creators.find(c => c.id === creatorId);
            
            if (!creator) {
                showToast('Creator not found', 'error');
                switchView('home');
                return;
            }
            
            // Update creator info
            if (creator.profilePicture) {
                elements.channelAvatar.innerHTML = `
                    <img src="${creator.profilePicture}" alt="Profile" style="width: 100%; height: 100%; object-fit: cover;">
                    ${creator.id === platformState.currentUser?.id ? `
                        <div class="channel-edit-overlay" id="editChannelBtn">
                            <i class="fas fa-camera"></i>
                        </div>
                    ` : ''}
                `;
                // Re-add event listener for edit button
                if (creator.id === platformState.currentUser?.id) {
                    document.getElementById('editChannelBtn').addEventListener('click', openChannelEdit);
                }
            } else {
                elements.channelAvatar.textContent = creator.name.charAt(0).toUpperCase();
                if (creator.id === platformState.currentUser?.id) {
                    elements.channelAvatar.innerHTML = `
                        <div>${creator.name.charAt(0).toUpperCase()}</div>
                        <div class="channel-edit-overlay" id="editChannelBtn">
                            <i class="fas fa-camera"></i>
                        </div>
                    `;
                    document.getElementById('editChannelBtn').addEventListener('click', openChannelEdit);
                }
            }
            
            // Update banner
            if (creator.coverPhoto) {
                elements.channelBanner.innerHTML = `<img src="${creator.coverPhoto}" alt="Cover">`;
            } else {
                elements.channelBanner.style.background = 'linear-gradient(135deg, #6a11cb 0%, #2575fc 100%)';
            }
            
            elements.channelName.textContent = creator.name;
            elements.channelSubscribers.textContent = `${formatNumber(creator.subscribers || 0)} subscribers`;
            
            // Count creator's videos
            const creatorVideos = platformState.videos.filter(v => v.creatorId === creator.id);
            elements.channelVideos.textContent = `${creatorVideos.length} videos`;
            
            // Update other details
            elements.channelDescription.textContent = creator.description || 'No description available.';
            elements.channelJoined.textContent = creator.joinedDate || 'Recently';
            elements.channelTotalViews.textContent = formatNumber(creator.totalViews || 0);
            
            // Load creator's videos
            loadCreatorVideos(creator.id);
        }
        
        // Load creator's videos
        function loadCreatorVideos(creatorId) {
            elements.creatorVideosGrid.innerHTML = '';
            
            const creatorVideos = platformState.videos.filter(v => v.creatorId === creatorId);
            
            if (creatorVideos.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = 'empty-state';
                emptyState.innerHTML = `
                    <i class="fas fa-video empty-icon"></i>
                    <h2>No videos yet</h2>
                    <p>This creator hasn't uploaded any videos yet.</p>
                `;
                elements.creatorVideosGrid.appendChild(emptyState);
                return;
            }
            
            creatorVideos.forEach(video => {
                const videoCard = createVideoCard(video);
                elements.creatorVideosGrid.appendChild(videoCard);
            });
        }
        
        // Switch creator tab
        function switchCreatorTab(tabName) {
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.add('hidden');
            });
            
            const tabId = tabName + 'Tab';
            const tabPane = document.getElementById(tabId);
            if (tabPane) {
                tabPane.classList.remove('hidden');
            }
        }
        
        // Toggle authentication mode
        function toggleAuthMode() {
            const isLoginMode = elements.authTitle.textContent === 'Sign In';
            
            if (isLoginMode) {
                elements.authTitle.textContent = 'Create Account';
                elements.authSubtitle.textContent = 'to start watching videos on Haitian Tube';
                elements.usernameGroup.style.display = 'flex';
                elements.emailGroup.style.display = 'flex';
                elements.authSubmitButton.textContent = 'Sign Up';
                elements.authToggleText.textContent = 'Already have an account?';
                elements.authToggleLink.textContent = 'Sign in';
            } else {
                elements.authTitle.textContent = 'Sign In';
                elements.authSubtitle.textContent = 'to continue to Haitian Tube';
                elements.usernameGroup.style.display = 'none';
                elements.emailGroup.style.display = 'none';
                elements.authSubmitButton.textContent = 'Sign In';
                elements.authToggleText.textContent = 'Don\'t have an account?';
                elements.authToggleLink.textContent = 'Sign up now';
            }
        }
        
        // Handle authentication form submission
        function handleAuthSubmit(e) {
            e.preventDefault();
            
            const isLoginMode = elements.authTitle.textContent === 'Sign In';
            
            if (isLoginMode) {
                // Login logic
                const password = elements.authPassword.value;
                
                if (!password) {
                    showToast('Please enter your password', 'error');
                    return;
                }
                
                // For real implementation, this would check against Firebase/Back4App
                const mockUser = {
                    id: 'user_' + Date.now(),
                    name: 'Creator',
                    email: 'creator@example.com',
                    username: 'creator',
                    joinedDate: new Date().toLocaleDateString(),
                    subscribers: 0,
                    totalViews: 0,
                    videos: []
                };
                
                platformState.currentUser = mockUser;
                platformState.isAuthenticated = true;
                localStorage.setItem('haitianTubeUser', JSON.stringify(mockUser));
                
                showToast('Successfully signed in!', 'success');
                updateAuthUI();
                switchView('home');
                
            } else {
                // Signup logic
                const username = elements.authUsername.value;
                const email = elements.authEmail.value;
                const password = elements.authPassword.value;
                
                if (!username || !email || !password) {
                    showToast('Please fill in all fields', 'error');
                    return;
                }
                
                if (!isValidEmail(email)) {
                    showToast('Please enter a valid email address', 'error');
                    return;
                }
                
                if (password.length < 6) {
                    showToast('Password must be at least 6 characters', 'error');
                    return;
                }
                
                // Create new user/channel
                const newUser = {
                    id: 'user_' + Date.now(),
                    name: username,
                    email: email,
                    username: username.toLowerCase(),
                    joinedDate: new Date().toLocaleDateString(),
                    subscribers: 0,
                    totalViews: 0,
                    videos: []
                };
                
                platformState.currentUser = newUser;
                platformState.isAuthenticated = true;
                localStorage.setItem('haitianTubeUser', JSON.stringify(newUser));
                
                // Add to creators list
                platformState.creators.push(newUser);
                localStorage.setItem('haitianTubeCreators', JSON.stringify(platformState.creators));
                
                showToast('Account created successfully! You now have a creator channel.', 'success');
                updateAuthUI();
                switchView('home');
            }
            
            elements.authForm.reset();
        }
        
        // Update UI based on authentication state
        function updateAuthUI() {
            if (platformState.isAuthenticated && platformState.currentUser) {
                // Update user avatar with profile picture if available
                if (platformState.currentUser.profilePicture) {
                    elements.userAvatar.innerHTML = `<img src="${platformState.currentUser.profilePicture}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
                } else {
                    elements.userAvatar.textContent = platformState.currentUser.name.charAt(0).toUpperCase();
                }
                
                // Show authenticated-only menu items
                elements.uploadButton.style.display = 'block';
                elements.myChannelItem.style.display = 'flex';
                elements.dashboardItem.style.display = 'flex';
                elements.logoutItem.style.display = 'flex';
                elements.loginItem.style.display = 'none';
            } else {
                elements.userAvatar.textContent = '?';
                elements.uploadButton.style.display = 'none';
                elements.myChannelItem.style.display = 'none';
                elements.dashboardItem.style.display = 'none';
                elements.logoutItem.style.display = 'none';
                elements.loginItem.style.display = 'flex';
            }
        }
        
        // Logout function
        function logout() {
            platformState.currentUser = null;
            platformState.isAuthenticated = false;
            localStorage.removeItem('haitianTubeUser');
            
            showToast('You have been logged out', 'info');
            updateAuthUI();
            switchView('home');
        }
        
        // Load dashboard data
        function loadDashboardData() {
            if (!platformState.currentUser) return;
            
            const creatorVideos = platformState.videos.filter(v => v.creatorId === platformState.currentUser.id);
            const totalViews = creatorVideos.reduce((sum, video) => sum + video.views, 0);
            
            elements.totalViews.textContent = formatNumber(totalViews);
            elements.subscribersCount.textContent = `${platformState.currentUser.subscribers || 0} subscribers`;
            elements.totalVideos.textContent = creatorVideos.length;
            
            loadVideoPerformance(creatorVideos);
        }
        
        // Load video performance data
        function loadVideoPerformance(videos) {
            elements.videosPerformance.innerHTML = '';
            
            if (videos.length === 0) {
                elements.videosPerformance.innerHTML = '<p>No videos uploaded yet.</p>';
                return;
            }
            
            const table = document.createElement('table');
            table.style.width = '100%';
            table.style.borderCollapse = 'collapse';
            table.style.marginTop = '20px';
            
            table.innerHTML = `
                <thead>
                    <tr style="border-bottom: 1px solid #ccc;">
                        <th style="text-align: left; padding: 12px 8px;">Video</th>
                        <th style="text-align: left; padding: 12px 8px;">Views</th>
                        <th style="text-align: left; padding: 12px 8px;">Status</th>
                    </tr>
                </thead>
                <tbody>
                    ${videos.map(video => `
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 12px 8px;">${video.title}</td>
                            <td style="padding: 12px 8px;">${formatNumber(video.views)}</td>
                            <td style="padding: 12px 8px;">
                                <span style="padding: 4px 8px; border-radius: 12px; font-size: 12px; background-color: ${video.status === 'verified' ? '#4caf50' : video.status === 'pending_verification' ? '#ff9800' : '#f44336'}; color: white;">
                                    ${video.status === 'verified' ? 'Verified' : video.status === 'pending_verification' ? 'Verifying' : 'Pending'}
                                </span>
                            </td>
                        </tr>
                    `).join('')}
                </tbody>
            `;
            
            elements.videosPerformance.appendChild(table);
        }
        
        // Toggle sidebar on mobile
        function toggleSidebar() {
            elements.sidebar.classList.toggle('active');
        }
        
        // Toggle dark mode
        function toggleDarkMode() {
            if (platformState.isDarkMode) {
                disableDarkMode();
            } else {
                enableDarkMode();
            }
        }
        
        // Enable dark mode
        function enableDarkMode() {
            document.body.classList.add('dark-mode');
            platformState.isDarkMode = true;
            localStorage.setItem('haitianTubeDarkMode', 'true');
            elements.darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
        
        // Disable dark mode
        function disableDarkMode() {
            document.body.classList.remove('dark-mode');
            platformState.isDarkMode = false;
            localStorage.setItem('haitianTubeDarkMode', 'false');
            elements.darkModeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        }
        
        // Handle search
        function handleSearch() {
            const query = elements.searchInput.value.trim();
            if (!query) return;
            
            showToast(`Searching for "${query}"...`, 'info');
        }
        
        // Show toast notification
        function showToast(message, type = 'info') {
            elements.toastMessage.textContent = message;
            elements.toast.className = `toast toast-${type}`;
            elements.toastIcon.className = getToastIcon(type);
            
            elements.toast.classList.remove('hidden');
            elements.toast.classList.add('show');
            
            setTimeout(() => {
                elements.toast.classList.remove('show');
                setTimeout(() => {
                    elements.toast.classList.add('hidden');
                }, 300);
            }, 3000);
        }
        
        // Get toast icon based on type
        function getToastIcon(type) {
            switch(type) {
                case 'success': return 'fas fa-check-circle';
                case 'error': return 'fas fa-exclamation-circle';
                default: return 'fas fa-info-circle';
            }
        }
        
        // Utility functions
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }
        
        function getRandomColor() {
            const colors = ['#6a11cb', '#2575fc', '#ff7e5f', '#f5576c', '#4facfe', '#00f2fe', '#43e97b', '#38f9d7', '#fa709a', '#fee140'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        // Initialize the platform when DOM is loaded
        document.addEventListener('DOMContentLoaded', initPlatform);
    </script>
</body>
</html>
