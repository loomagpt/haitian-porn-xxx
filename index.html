<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="jUFvWg6T0RGd45tCoerev16CHRJYJ7j_fBJXesmxztE" />
    
    <!-- SEO Meta Tags -->
    <title>Haitian Tube - Watch and Share Haitian Videos</title>
    <meta name="description" content="Watch the latest Haitian videos, music, entertainment, and trending content. Join our community of creators and share your videos.">
    <meta name="keywords" content="Haitian videos, Haitian music, Haitian entertainment, Haitian Tube, video sharing, Haitian content">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Haitian Tube - Premium Video Sharing">
    <meta property="og:description" content="Watch and share the best Haitian videos">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?w=1200&h=630&fit=crop">
    <link rel="canonical" href="https://haitiantube.com">
    
    <!-- Fluid Player -->
    <link rel="stylesheet" href="https://cdn.fluidplayer.com/v3/current/fluidplayer.min.css">
    <script src="https://cdn.fluidplayer.com/v3/current/fluidplayer.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    
    <!-- Parse SDK -->
    <script src="https://npmcdn.com/parse/dist/parse.min.js"></script>
    
    <!-- Ad Scripts -->
    <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script>
    <meta http-equiv="Delegate-CH" content="Sec-CH-UA https://s.magsrv.com; Sec-CH-UA-Mobile https://s.magsrv.com; Sec-CH-UA-Arch https://s.magsrv.com; Sec-CH-UA-Model https://s.magsrv.com; Sec-CH-UA-Platform https://s.magsrv.com; Sec-CH-UA-Platform-Version https://s.magsrv.com; Sec-CH-UA-Bitness https://s.magsrv.com; Sec-CH-UA-Full-Version-List https://s.magsrv.com; Sec-CH-UA-Full-Version https://s.magsrv.com;">
    
    <style>
        :root {
            --primary-red: #FF0000;
            --primary-dark: #CC0000;
            --secondary-blue: #065FD4;
            --accent-green: #00A900;
            --bg-dark: #0F0F0F;
            --bg-surface: #212121;
            --bg-surface-light: #3D3D3D;
            --text-primary: #FFFFFF;
            --text-secondary: #AAAAAA;
            --text-muted: #717171;
            --bg-light: #FFFFFF;
            --bg-gray: #F8F8F8;
            --text-dark: #030303;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.4);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.5);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-full: 9999px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', 'Segoe UI', Arial, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Header Styles */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;
            background: rgba(15, 15, 15, 0.98);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            padding: 0 24px;
            z-index: 1000;
            box-shadow: var(--shadow-lg);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-right: 40px;
            flex-shrink: 0;
        }

        .logo-icon {
            color: var(--primary-red);
            font-size: 36px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .logo-text {
            font-family: 'Poppins', sans-serif;
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(45deg, var(--primary-red), #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        /* Search Container */
        .search-wrapper {
            flex: 1;
            max-width: 720px;
            margin: 0 auto;
            position: relative;
            display: flex;
            justify-content: center;
        }

        .search-container {
            width: 100%;
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 18px;
            pointer-events: none;
            z-index: 2;
        }

        .search-input {
            width: 100%;
            height: 48px;
            padding: 0 48px 0 48px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-full);
            color: var(--text-primary);
            font-size: 16px;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-red);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.2);
        }

        .search-input::placeholder {
            color: var(--text-muted);
            font-weight: 300;
        }

        .search-button {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-red);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            color: white;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .search-button:hover {
            background: var(--primary-dark);
            transform: translateY(-50%) scale(1.05);
        }

        /* Suggestions Dropdown */
        .suggestions-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: var(--bg-surface);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            z-index: 1000;
            display: none;
            max-height: 400px;
            overflow-y: auto;
        }

        .suggestions-dropdown.active {
            display: block;
        }

        .suggestion-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .suggestion-icon {
            color: var(--text-muted);
            font-size: 14px;
            width: 20px;
            text-align: center;
        }

        .suggestion-content {
            flex: 1;
        }

        .suggestion-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .suggestion-title mark {
            background: rgba(255, 0, 0, 0.3);
            color: var(--primary-red);
            font-weight: 600;
            padding: 0 2px;
            border-radius: 2px;
        }

        .suggestion-meta {
            font-size: 12px;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .suggestion-type {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 8px;
            border-radius: var(--radius-sm);
            font-size: 11px;
            text-transform: uppercase;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-left: 40px;
            flex-shrink: 0;
        }

        .action-button {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 20px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .action-button:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .upload-btn {
            background: var(--primary-red);
            color: white;
            padding: 10px 24px;
            border-radius: var(--radius-full);
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 120px;
            justify-content: center;
        }

        .upload-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 0, 0, 0.3);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-red), var(--secondary-blue));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: var(--transition);
            overflow: hidden;
        }

        .user-avatar:hover {
            transform: scale(1.05);
            border-color: var(--primary-red);
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Main Layout */
        .main-container {
            display: flex;
            margin-top: 70px;
            min-height: calc(100vh - 70px);
        }

        .sidebar {
            width: 240px;
            background: rgba(15, 15, 15, 0.95);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px 0;
            position: fixed;
            top: 70px;
            left: 0;
            height: calc(100vh - 70px);
            overflow-y: auto;
            z-index: 900;
            backdrop-filter: blur(10px);
        }

        .sidebar-section {
            padding: 0 12px;
            margin-bottom: 24px;
        }

        .sidebar-section h3 {
            font-size: 14px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
            padding: 0 12px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 12px 24px;
            color: var(--text-primary);
            text-decoration: none;
            border-radius: var(--radius-sm);
            margin: 4px 12px;
            transition: var(--transition);
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-item.active {
            background: rgba(255, 0, 0, 0.1);
            color: var(--primary-red);
            font-weight: 500;
        }

        .nav-item.active .nav-icon {
            color: var(--primary-red);
        }

        .nav-icon {
            font-size: 20px;
            width: 24px;
            text-align: center;
        }

        .main-content {
            flex: 1;
            margin-left: 240px;
            padding: 24px;
            background: var(--bg-dark);
        }

        /* Ad Containers */
        .ad-container-banner {
            width: 100%;
            margin: 20px 0;
            text-align: center;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            background: var(--bg-surface);
        }

        .ad-container-vertical {
            width: 160px;
            margin: 20px auto;
            background: var(--bg-surface);
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .ad-container-slider {
            width: 100%;
            margin: 30px 0;
            padding: 20px 0;
            background: var(--bg-surface);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        /* Content with Ads Layout */
        .content-with-ads {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 24px;
        }

        .video-content {
            min-width: 0;
        }

        .sidebar-ads {
            width: 300px;
        }

        /* Videos Grid */
        .videos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }

        .video-card {
            background: var(--bg-surface);
            border-radius: var(--radius-md);
            overflow: hidden;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            box-shadow: var(--shadow-sm);
        }

        .video-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            background: var(--bg-surface-light);
        }

        .video-thumbnail {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            background: #000;
            overflow: hidden;
        }

        .video-thumbnail img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .video-card:hover .video-thumbnail img {
            transform: scale(1.05);
        }

        .video-duration {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .video-info {
            padding: 16px;
        }

        .video-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.4;
        }

        .video-creator {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .creator-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-red), var(--secondary-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            color: white;
            font-size: 14px;
        }

        .video-stats {
            display: flex;
            gap: 16px;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Shorts Section */
        .shorts-section {
            margin: 40px 0;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .section-header h2 {
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .shorts-icon {
            color: var(--primary-red);
            font-size: 28px;
        }

        .shorts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
        }

        .short-card {
            background: var(--bg-surface);
            border-radius: var(--radius-md);
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .short-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .short-thumbnail {
            width: 100%;
            height: 320px;
            position: relative;
            overflow: hidden;
        }

        .short-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .short-info {
            padding: 12px;
        }

        .short-title {
            font-weight: 500;
            font-size: 14px;
            margin-bottom: 4px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .short-stats {
            color: var(--text-secondary);
            font-size: 12px;
        }

        /* Video Player */
        .video-player-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            z-index: 2000;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .player-header {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent);
            z-index: 10;
        }

        .close-player {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }

        .close-player:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .player-actions {
            display: flex;
            gap: 12px;
        }

        .player-action-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            transition: var(--transition);
            backdrop-filter: blur(10px);
            position: relative;
        }

        .player-action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .player-action-btn.like-btn.active i {
            color: var(--primary-red);
            font-weight: 900;
        }

        .player-action-btn.dislike-btn.active i {
            color: var(--secondary-blue);
            font-weight: 900;
        }

        .action-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--primary-red);
            color: white;
            font-size: 11px;
            font-weight: 600;
            min-width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
        }

        .player-content {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 80px 20px 20px;
        }

        #fluid-player {
            width: 100%;
            max-width: 1200px;
            height: auto;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        /* Video Info Panel */
        .video-info-panel {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            color: white;
            z-index: 10;
        }

        .video-info-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .video-info-meta {
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .video-info-creator {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .video-info-creator img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
        }

        /* Share Modal */
        .share-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 4000;
            backdrop-filter: blur(20px);
        }

        .share-container {
            background: var(--bg-surface);
            border-radius: var(--radius-lg);
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .share-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .share-header h3 {
            font-size: 20px;
            font-weight: 600;
        }

        .share-close {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 20px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .share-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .share-preview {
            display: flex;
            gap: 16px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-md);
            margin-bottom: 20px;
        }

        .share-thumbnail {
            width: 120px;
            height: 68px;
            border-radius: var(--radius-sm);
            object-fit: cover;
        }

        .share-info {
            flex: 1;
        }

        .share-info h4 {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .share-info p {
            font-size: 12px;
            color: var(--text-muted);
        }

        .share-link-container {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.05);
            padding: 8px;
            border-radius: var(--radius-md);
        }

        .share-link-input {
            flex: 1;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 14px;
        }

        .share-link-input:focus {
            outline: none;
            border-color: var(--primary-red);
        }

        .copy-link-btn {
            padding: 12px 20px;
            background: var(--primary-red);
            border: none;
            border-radius: var(--radius-sm);
            color: white;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .copy-link-btn:hover {
            background: var(--primary-dark);
        }

        .share-platforms {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .share-platform {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            border-radius: var(--radius-md);
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
            font-size: 12px;
        }

        .share-platform:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .share-platform i {
            font-size: 24px;
        }

        .share-platform.whatsapp i { color: #25D366; }
        .share-platform.telegram i { color: #0088cc; }
        .share-platform.tiktok i { color: #000000; }
        .share-platform.instagram i { color: #E4405F; }
        .share-platform.pinterest i { color: #BD081C; }
        .share-platform.facebook i { color: #1877F2; }

        /* Auth Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            backdrop-filter: blur(10px);
        }

        .auth-container {
            background: var(--bg-surface);
            border-radius: var(--radius-lg);
            padding: 40px;
            width: 90%;
            max-width: 400px;
            box-shadow: var(--shadow-lg);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-header h2 {
            font-size: 28px;
            margin-bottom: 8px;
            background: linear-gradient(45deg, var(--primary-red), #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .auth-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.05);
            padding: 4px;
            border-radius: var(--radius-sm);
        }

        .auth-tab {
            flex: 1;
            padding: 12px;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 6px;
            font-weight: 500;
            transition: var(--transition);
        }

        .auth-tab.active {
            background: var(--primary-red);
            color: white;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .form-input {
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 16px;
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-red);
            box-shadow: 0 0 0 2px rgba(255, 0, 0, 0.2);
        }

        .auth-button {
            padding: 14px;
            background: var(--primary-red);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 10px;
        }

        .auth-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 0, 0, 0.3);
        }

        /* Upload Modal */
        .upload-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
        }

        .upload-container {
            background: var(--bg-surface);
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: var(--shadow-lg);
        }

        .upload-header {
            margin-bottom: 30px;
            text-align: center;
        }

        .upload-header h2 {
            font-size: 28px;
            margin-bottom: 8px;
            background: linear-gradient(45deg, var(--primary-red), #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .upload-dropzone {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-md);
            padding: 60px 20px;
            text-align: center;
            margin-bottom: 30px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .upload-dropzone:hover {
            border-color: var(--primary-red);
            background: rgba(255, 0, 0, 0.05);
        }

        .upload-dropzone.dragover {
            border-color: var(--primary-red);
            background: rgba(255, 0, 0, 0.1);
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 64px;
            color: var(--primary-red);
            margin-bottom: 20px;
        }

        .upload-input {
            display: none;
        }

        .upload-preview {
            display: none;
            margin-bottom: 30px;
        }

        .preview-video {
            width: 100%;
            max-height: 300px;
            border-radius: var(--radius-md);
            background: #000;
        }

        .upload-progress {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-sm);
            padding: 20px;
            margin-bottom: 30px;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-red), #FF6B6B);
            width: 0%;
            transition: width 0.3s ease;
        }

        .form-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        .cancel-button {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
        }

        .cancel-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .submit-button {
            padding: 12px 24px;
            background: var(--primary-red);
            border: none;
            border-radius: var(--radius-sm);
            color: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .submit-button:hover:not(:disabled) {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .submit-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Age Verification Modal */
        .age-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 5000;
            backdrop-filter: blur(20px);
        }

        .age-container {
            background: linear-gradient(135deg, var(--bg-surface), #1a1a1a);
            border-radius: var(--radius-lg);
            padding: 50px;
            max-width: 500px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: zoomIn 0.5s ease;
        }

        @keyframes zoomIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .age-icon {
            font-size: 80px;
            color: var(--primary-red);
            margin-bottom: 30px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .age-container h1 {
            font-size: 36px;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--primary-red), #FF6B6B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .age-buttons {
            display: flex;
            gap: 16px;
            margin-top: 40px;
        }

        .age-button {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: var(--radius-md);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .age-confirm {
            background: linear-gradient(45deg, var(--primary-red), #FF6B6B);
            color: white;
        }

        .age-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 0, 0, 0.3);
        }

        .age-deny {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .age-deny:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: var(--bg-surface);
            color: var(--text-primary);
            padding: 16px 24px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 4000;
            transform: translateX(100%);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            max-width: 400px;
            border-left: 4px solid var(--primary-red);
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast-success {
            border-left-color: #4CAF50;
        }

        .toast-error {
            border-left-color: #F44336;
        }

        .toast-info {
            border-left-color: var(--primary-red);
        }

        .toast-icon {
            font-size: 20px;
        }

        /* Loading State */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px;
            text-align: center;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-red);
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* No Videos State */
        .no-videos {
            text-align: center;
            padding: 80px 20px;
            color: var(--text-secondary);
        }

        .no-videos i {
            font-size: 64px;
            color: var(--text-muted);
            margin-bottom: 20px;
        }

        .no-videos h3 {
            font-size: 24px;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .search-wrapper {
                max-width: 500px;
            }
            
            .content-with-ads {
                grid-template-columns: 1fr;
            }
            
            .sidebar-ads {
                display: none;
            }
            
            .videos-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .shorts-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .search-wrapper {
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                padding: 12px;
                background: var(--bg-dark);
                display: none;
                max-width: 100%;
                margin: 0;
                z-index: 100;
            }
            
            .search-wrapper.active {
                display: block;
            }
            
            .logo-container {
                margin-right: 20px;
            }
            
            .logo-text {
                display: none;
            }
            
            .header-actions {
                margin-left: auto;
                gap: 8px;
            }
            
            .upload-btn span {
                display: none;
            }
            
            .upload-btn {
                min-width: auto;
                width: 44px;
                padding: 10px;
            }
            
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .menu-button {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .search-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .videos-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .share-platforms {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .videos-grid {
                grid-template-columns: 1fr;
            }
            
            .shorts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Menu Button */
        .menu-button {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 20px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
        }

        .menu-button:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Search Toggle */
        .search-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 20px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
        }

        .search-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-red);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: var(--primary-red);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(255, 0, 0, 0.3);
            transition: var(--transition);
            border: none;
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(255, 0, 0, 0.4);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .tooltip:hover::after {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body>
    <!-- Age Verification Modal -->
    <div class="age-modal" id="ageModal">
        <div class="age-container">
            <i class="fas fa-exclamation-triangle age-icon"></i>
            <h1>Age Verification Required</h1>
            <p>You must be at least 18 years old to access Haitian Tube.</p>
            <div class="age-buttons">
                <button class="age-button age-confirm" id="confirmAge">I am 18 or older</button>
                <button class="age-button age-deny" id="denyAge">I am under 18</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header>
        <button class="menu-button" id="menuToggle">
            <i class="fas fa-bars"></i>
        </button>
        
        <div class="logo-container">
            <i class="fas fa-play-circle logo-icon"></i>
            <span class="logo-text">Haitian Tube</span>
        </div>

        <button class="search-toggle" id="searchToggle">
            <i class="fas fa-search"></i>
        </button>

        <!-- Search Wrapper with Suggestions -->
        <div class="search-wrapper" id="searchWrapper">
            <div class="search-container">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" id="searchInput" placeholder="Search videos, creators, and more..." autocomplete="off">
                <button class="search-button" id="searchButton">
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
            
            <!-- Suggestions Dropdown -->
            <div class="suggestions-dropdown" id="suggestionsDropdown">
                <!-- Suggestions will be populated dynamically -->
            </div>
        </div>

        <div class="header-actions">
            <button class="action-button tooltip" data-tooltip="Upload" id="uploadButton">
                <i class="fas fa-upload"></i>
            </button>
            <button class="action-button tooltip" data-tooltip="Notifications" id="notificationsButton">
                <i class="fas fa-bell"></i>
            </button>
            <div class="user-avatar" id="userAvatar">
                <i class="fas fa-user"></i>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <div class="nav-item active" data-view="home">
                    <i class="fas fa-home nav-icon"></i>
                    <span>Home</span>
                </div>
                <div class="nav-item" data-view="shorts">
                    <i class="fas fa-bolt nav-icon"></i>
                    <span>Shorts</span>
                </div>
                <div class="nav-item" data-view="subscriptions">
                    <i class="fas fa-user-friends nav-icon"></i>
                    <span>Subscriptions</span>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>Library</h3>
                <div class="nav-item" data-view="history">
                    <i class="fas fa-history nav-icon"></i>
                    <span>History</span>
                </div>
                <div class="nav-item" data-view="watch-later">
                    <i class="fas fa-clock nav-icon"></i>
                    <span>Watch Later</span>
                </div>
                <div class="nav-item" data-view="liked">
                    <i class="fas fa-thumbs-up nav-icon"></i>
                    <span>Liked Videos</span>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>Account</h3>
                <div class="nav-item" id="loginButton">
                    <i class="fas fa-sign-in-alt nav-icon"></i>
                    <span>Sign In</span>
                </div>
                <div class="nav-item" id="logoutButton" style="display: none;">
                    <i class="fas fa-sign-out-alt nav-icon"></i>
                    <span>Log Out</span>
                </div>
            </div>
        </aside>

        <!-- Main Content with Ads -->
        <main class="main-content" id="mainContent">
            <div class="content-with-ads">
                <div class="video-content">
                    <!-- Banner Ad -->
                    <div class="ad-container-banner">
                        <ins class="eas6a97888e31" data-zoneid="5830152"></ins>
                        <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
                    </div>

                    <!-- Videos Grid -->
                    <div class="videos-grid" id="videosGrid">
                        <!-- Videos loaded dynamically -->
                    </div>

                    <!-- Shorts Section -->
                    <div class="shorts-section" id="shortsSection">
                        <div class="section-header">
                            <h2><i class="fas fa-bolt shorts-icon"></i> Shorts</h2>
                            <button class="see-all" id="seeAllShorts">See All</button>
                        </div>
                        <div class="shorts-grid" id="shortsGrid">
                            <!-- Shorts loaded dynamically -->
                        </div>
                    </div>
                </div>

                <!-- Sidebar Ads -->
                <div class="sidebar-ads">
                    <!-- 160x300 Ad -->
                    <div class="ad-container-vertical">
                        <script>
                            atOptions = {
                                'key' : '92705221f4f953ea7313efcc11384c43',
                                'format' : 'iframe',
                                'height' : 300,
                                'width' : 160,
                                'params' : {}
                            };
                        </script>
                        <script src="https://instantmemorize.com/92705221f4f953ea7313efcc11384c43/invoke.js"></script>
                    </div>
                    
                    <!-- Additional ads can be placed here -->
                </div>
            </div>

            <!-- Loading State -->
            <div class="loading" id="loadingState">
                <div class="spinner"></div>
                <p>Loading amazing content...</p>
            </div>

            <!-- No Videos State -->
            <div class="no-videos" id="noVideos" style="display: none;">
                <i class="fas fa-video-slash"></i>
                <h3>No Videos Found</h3>
                <p>Be the first to upload a video!</p>
                <button class="auth-button" id="uploadFirstVideo">Upload Video</button>
            </div>
        </main>
    </div>

    <!-- Video Player Modal -->
    <div class="video-player-container" id="videoPlayerModal">
        <div class="player-header">
            <button class="close-player" id="closePlayer">
                <i class="fas fa-times"></i>
            </button>
            <div class="player-actions">
                <button class="player-action-btn like-btn" id="likeVideoBtn" title="Like">
                    <i class="far fa-thumbs-up"></i>
                    <span class="action-count" id="likeCount">0</span>
                </button>
                <button class="player-action-btn dislike-btn" id="dislikeVideoBtn" title="Dislike">
                    <i class="far fa-thumbs-down"></i>
                    <span class="action-count" id="dislikeCount">0</span>
                </button>
                <button class="player-action-btn" id="shareVideoBtn" title="Share">
                    <i class="fas fa-share-alt"></i>
                </button>
            </div>
        </div>
        <div class="player-content">
            <div id="fluid-player"></div>
        </div>
        <div class="video-info-panel" id="videoInfoPanel">
            <!-- Video info populated dynamically -->
        </div>
    </div>

    <!-- Share Modal -->
    <div class="share-modal" id="shareModal">
        <div class="share-container">
            <div class="share-header">
                <h3>Share Video</h3>
                <button class="share-close" id="closeShare">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="share-preview" id="sharePreview">
                <!-- Populated dynamically -->
            </div>
            
            <div class="share-link-container">
                <input type="text" class="share-link-input" id="shareLink" readonly>
                <button class="copy-link-btn" id="copyLinkBtn">
                    <i class="fas fa-copy"></i> Copy
                </button>
            </div>
            
            <div class="share-platforms">
                <button class="share-platform whatsapp" data-platform="whatsapp">
                    <i class="fab fa-whatsapp"></i>
                    <span>WhatsApp</span>
                </button>
                <button class="share-platform telegram" data-platform="telegram">
                    <i class="fab fa-telegram"></i>
                    <span>Telegram</span>
                </button>
                <button class="share-platform tiktok" data-platform="tiktok">
                    <i class="fab fa-tiktok"></i>
                    <span>TikTok</span>
                </button>
                <button class="share-platform instagram" data-platform="instagram">
                    <i class="fab fa-instagram"></i>
                    <span>Instagram</span>
                </button>
                <button class="share-platform pinterest" data-platform="pinterest">
                    <i class="fab fa-pinterest"></i>
                    <span>Pinterest</span>
                </button>
                <button class="share-platform facebook" data-platform="facebook">
                    <i class="fab fa-facebook"></i>
                    <span>Facebook</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-container">
            <div class="auth-header">
                <h2>Welcome to Haitian Tube</h2>
                <p>Join our community of creators</p>
            </div>
            
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Sign In</button>
                <button class="auth-tab" data-tab="signup">Sign Up</button>
            </div>
            
            <form class="auth-form" id="loginForm">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="loginEmail" placeholder="Enter your email" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" required>
                </div>
                
                <button type="submit" class="auth-button">Sign In</button>
            </form>
            
            <form class="auth-form" id="signupForm" style="display: none;">
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" class="form-input" id="signupUsername" placeholder="Choose a username" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="signupEmail" placeholder="Enter your email" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="signupPassword" placeholder="At least 6 characters" required minlength="6">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Confirm Password</label>
                    <input type="password" class="form-input" id="signupConfirmPassword" placeholder="Confirm your password" required>
                </div>
                
                <button type="submit" class="auth-button">Create Account</button>
            </form>
            
            <div class="auth-divider">or continue with</div>
            
            <div class="social-auth">
                <button class="google-button" id="googleSignIn">
                    <i class="fab fa-google"></i>
                    <span>Sign in with Google</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div class="upload-modal" id="uploadModal">
        <div class="upload-container">
            <div class="upload-header">
                <h2>Upload Your Video</h2>
                <p>Share your content with the world</p>
            </div>
            
            <div class="upload-dropzone" id="uploadDropzone">
                <i class="fas fa-cloud-upload-alt upload-icon"></i>
                <h3>Drag & Drop Video File</h3>
                <p>or click to browse</p>
                <p class="file-types">MP4, MOV, AVI up to 2GB</p>
                <input type="file" class="upload-input" id="videoFileInput" accept="video/*" />
            </div>
            
            <div class="upload-preview" id="uploadPreview">
                <video class="preview-video" controls id="previewVideo"></video>
            </div>
            
            <div class="upload-progress" id="uploadProgress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text">
                    <span>Uploading...</span>
                    <span id="progressPercent">0%</span>
                </div>
            </div>
            
            <form class="auth-form">
                <div class="form-group">
                    <label class="form-label">Video Title</label>
                    <input type="text" class="form-input" id="videoTitle" placeholder="Enter a compelling title" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-input" id="videoDescription" rows="4" placeholder="Tell viewers about your video"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Tags (comma separated)</label>
                    <input type="text" class="form-input" id="videoTags" placeholder="funny, tutorial, music, etc">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" id="isShort">
                        Mark as Short (vertical video)
                    </label>
                </div>
            </form>
            
            <div class="form-actions">
                <button class="cancel-button" id="cancelUpload">Cancel</button>
                <button class="submit-button" id="submitUpload" disabled>Upload Video</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-info-circle toast-icon"></i>
        <span id="toastMessage">Notification</span>
    </div>

    <!-- Floating Action Button -->
    <button class="fab" id="fabUpload">
        <i class="fas fa-plus"></i>
    </button>

    <script>
        // ============================
        // CONFIGURATION
        // ============================
        const CONFIG = {
            firebase: {
                apiKey: "AIzaSyBsfheLc8i-CsRGJ9jkbGUhdTj3ZD3SLu8",
                authDomain: "haitiantube-2affb.firebaseapp.com",
                projectId: "haitiantube-2affb",
                storageBucket: "haitiantube-2affb.firebasestorage.app",
                messagingSenderId: "564033314604",
                appId: "1:564033314604:web:dfcd9b74b670e47dae1689",
                measurementId: "G-8WS57GK218"
            },
            parse: {
                applicationId: "KO17FZ9yhp8XzNQnrlYzj7GaXaTr9hcekpY7u667",
                javascriptKey: "lTMvuwBNvXgAXfHnNHiqkdjj7vQHk5LcEocQY8Ya",
                serverURL: "https://parseapi.back4app.com/"
            },
            cloudinary: {
                cloudName: "dqx9c4kc6",
                uploadPreset: "xp4psfnn"
            },
            ads: {
                preRoll: "https://cpm.afkwa.com/vast?zone=283171&tagid=387067",
                midRoll: "https://cpm.afkwa.com/vast?zone=283171&tagid=387067",
                postRoll1: "https://cpm.afkwa.com/vast?zone=283171&tagid=387067",
                postRoll2: "https://s.magsrv.com/v1/vast.php?idzone=5829940",
                inVideo: "https://s.magsrv.com/v1/vast.php?idzone=5831138"
            }
        };

        // ============================
        // STATE MANAGEMENT
        // ============================
        const state = {
            user: null,
            isAuthenticated: false,
            currentView: 'home',
            videos: [],
            shorts: [],
            loading: true,
            currentVideo: null,
            videoPlayer: null,
            isUploading: false,
            uploadProgress: 0,
            searchTimeout: null,
            popularSearches: ['haitian music', 'kompa', 'haitian news', 'haitian comedy', 'haitian movies'],
            userLikes: new Set(),
            userDislikes: new Set()
        };

        // ============================
        // DOM ELEMENTS
        // ============================
        const elements = {
            // Age Verification
            ageModal: document.getElementById('ageModal'),
            confirmAge: document.getElementById('confirmAge'),
            denyAge: document.getElementById('denyAge'),
            
            // Header
            menuToggle: document.getElementById('menuToggle'),
            searchToggle: document.getElementById('searchToggle'),
            searchWrapper: document.getElementById('searchWrapper'),
            searchInput: document.getElementById('searchInput'),
            searchButton: document.getElementById('searchButton'),
            suggestionsDropdown: document.getElementById('suggestionsDropdown'),
            uploadButton: document.getElementById('uploadButton'),
            userAvatar: document.getElementById('userAvatar'),
            
            // Sidebar
            sidebar: document.getElementById('sidebar'),
            loginButton: document.getElementById('loginButton'),
            logoutButton: document.getElementById('logoutButton'),
            navItems: document.querySelectorAll('.nav-item'),
            
            // Main Content
            mainContent: document.getElementById('mainContent'),
            videosGrid: document.getElementById('videosGrid'),
            shortsGrid: document.getElementById('shortsGrid'),
            loadingState: document.getElementById('loadingState'),
            noVideos: document.getElementById('noVideos'),
            uploadFirstVideo: document.getElementById('uploadFirstVideo'),
            
            // Video Player
            videoPlayerModal: document.getElementById('videoPlayerModal'),
            closePlayer: document.getElementById('closePlayer'),
            likeVideoBtn: document.getElementById('likeVideoBtn'),
            dislikeVideoBtn: document.getElementById('dislikeVideoBtn'),
            shareVideoBtn: document.getElementById('shareVideoBtn'),
            likeCount: document.getElementById('likeCount'),
            dislikeCount: document.getElementById('dislikeCount'),
            videoInfoPanel: document.getElementById('videoInfoPanel'),
            
            // Share Modal
            shareModal: document.getElementById('shareModal'),
            closeShare: document.getElementById('closeShare'),
            shareLink: document.getElementById('shareLink'),
            copyLinkBtn: document.getElementById('copyLinkBtn'),
            sharePreview: document.getElementById('sharePreview'),
            
            // Authentication
            authModal: document.getElementById('authModal'),
            loginForm: document.getElementById('loginForm'),
            signupForm: document.getElementById('signupForm'),
            loginEmail: document.getElementById('loginEmail'),
            loginPassword: document.getElementById('loginPassword'),
            signupUsername: document.getElementById('signupUsername'),
            signupEmail: document.getElementById('signupEmail'),
            signupPassword: document.getElementById('signupPassword'),
            signupConfirmPassword: document.getElementById('signupConfirmPassword'),
            googleSignIn: document.getElementById('googleSignIn'),
            authTabs: document.querySelectorAll('.auth-tab'),
            
            // Upload
            uploadModal: document.getElementById('uploadModal'),
            uploadDropzone: document.getElementById('uploadDropzone'),
            videoFileInput: document.getElementById('videoFileInput'),
            uploadPreview: document.getElementById('uploadPreview'),
            previewVideo: document.getElementById('previewVideo'),
            uploadProgress: document.getElementById('uploadProgress'),
            progressFill: document.getElementById('progressFill'),
            progressPercent: document.getElementById('progressPercent'),
            videoTitle: document.getElementById('videoTitle'),
            videoDescription: document.getElementById('videoDescription'),
            videoTags: document.getElementById('videoTags'),
            isShort: document.getElementById('isShort'),
            cancelUpload: document.getElementById('cancelUpload'),
            submitUpload: document.getElementById('submitUpload'),
            
            // Toast
            toast: document.getElementById('toast'),
            toastMessage: document.getElementById('toastMessage'),
            
            // FAB
            fabUpload: document.getElementById('fabUpload')
        };

        // ============================
        // INITIALIZATION
        // ============================
        document.addEventListener('DOMContentLoaded', () => {
            showAgeVerification();
            initializeFirebase();
            initializeParse();
            setupEventListeners();
            loadContent();
            setupSearchSuggestions();
            checkUrlForVideo();
        });

        // ============================
        // AGE VERIFICATION
        // ============================
        function showAgeVerification() {
            if (!localStorage.getItem('ageVerified')) {
                elements.ageModal.style.display = 'flex';
            }
            
            elements.confirmAge.addEventListener('click', () => {
                localStorage.setItem('ageVerified', 'true');
                elements.ageModal.style.display = 'none';
                showToast('Welcome to Haitian Tube!', 'success');
            });
            
            elements.denyAge.addEventListener('click', () => {
                window.location.href = 'https://www.google.com';
            });
        }

        // ============================
        // FIREBASE INITIALIZATION
        // ============================
        function initializeFirebase() {
            firebase.initializeApp(CONFIG.firebase);
            
            firebase.auth().onAuthStateChanged(async (user) => {
                if (user) {
                    state.user = {
                        uid: user.uid,
                        email: user.email,
                        displayName: user.displayName || user.email.split('@')[0],
                        photoURL: user.photoURL
                    };
                    state.isAuthenticated = true;
                    
                    await loadUserInteractions();
                    updateAuthUI();
                } else {
                    state.user = null;
                    state.isAuthenticated = false;
                    state.userLikes.clear();
                    state.userDislikes.clear();
                    updateAuthUI();
                }
            });
        }

        // ============================
        // PARSE INITIALIZATION
        // ============================
        function initializeParse() {
            Parse.initialize(CONFIG.parse.applicationId, CONFIG.parse.javascriptKey);
            Parse.serverURL = CONFIG.parse.serverURL;
        }

        // ============================
        // LOAD USER INTERACTIONS
        // ============================
        async function loadUserInteractions() {
            if (!state.isAuthenticated) return;
            
            try {
                // Load user's likes
                const Like = Parse.Object.extend('Like');
                const likeQuery = new Parse.Query(Like);
                likeQuery.equalTo('userId', state.user.uid);
                const likes = await likeQuery.find();
                likes.forEach(like => state.userLikes.add(like.get('videoId')));
                
                // Load user's dislikes
                const Dislike = Parse.Object.extend('Dislike');
                const dislikeQuery = new Parse.Query(Dislike);
                dislikeQuery.equalTo('userId', state.user.uid);
                const dislikes = await dislikeQuery.find();
                dislikes.forEach(dislike => state.userDislikes.add(dislike.get('videoId')));
                
            } catch (error) {
                console.error('Error loading user interactions:', error);
            }
        }

        // ============================
        // CONTENT LOADING
        // ============================
        async function loadContent() {
            elements.loadingState.style.display = 'flex';
            elements.videosGrid.innerHTML = '';
            elements.shortsGrid.innerHTML = '';
            
            try {
                await loadVideos();
                await loadShorts();
                elements.loadingState.style.display = 'none';
                
                if (state.videos.length === 0 && state.shorts.length === 0) {
                    elements.noVideos.style.display = 'block';
                } else {
                    elements.noVideos.style.display = 'none';
                }
                
            } catch (error) {
                console.error('Error loading content:', error);
                elements.loadingState.style.display = 'none';
                showToast('Error loading content', 'error');
            }
        }

        async function loadVideos(searchQuery = '') {
            const Video = Parse.Object.extend('Video');
            const query = new Parse.Query(Video);
            query.notEqualTo('isShort', true);
            
            if (searchQuery) {
                query.contains('title', searchQuery);
            }
            
            query.descending('createdAt');
            query.limit(50);
            
            const results = await query.find();
            state.videos = results.map(videoToObject);
            displayVideos();
        }

        async function loadShorts() {
            const Video = Parse.Object.extend('Video');
            const query = new Parse.Query(Video);
            query.equalTo('isShort', true);
            query.descending('createdAt');
            query.limit(20);
            
            const results = await query.find();
            state.shorts = results.map(videoToObject);
            displayShorts();
        }

        function videoToObject(video) {
            return {
                id: video.id,
                title: video.get('title') || 'Untitled',
                description: video.get('description') || '',
                videoUrl: video.get('videoUrl'),
                thumbnailUrl: video.get('thumbnailUrl') || getDefaultThumbnail(),
                creatorId: video.get('creatorId'),
                creatorName: video.get('creatorName') || 'Anonymous',
                views: video.get('views') || 0,
                likes: video.get('likes') || 0,
                dislikes: video.get('dislikes') || 0,
                duration: video.get('duration') || '0:00',
                isShort: video.get('isShort') || false,
                createdAt: video.get('createdAt'),
                tags: video.get('tags') || []
            };
        }

        function getDefaultThumbnail() {
            const thumbnails = [
                'https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?w=400&h=225&fit=crop',
                'https://images.unsplash.com/photo-1536240478700-b869070f9279?w=400&h=225&fit=crop',
                'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=225&fit=crop'
            ];
            return thumbnails[Math.floor(Math.random() * thumbnails.length)];
        }

        function displayVideos() {
            elements.videosGrid.innerHTML = '';
            state.videos.forEach(video => {
                elements.videosGrid.appendChild(createVideoCard(video));
            });
        }

        function displayShorts() {
            elements.shortsGrid.innerHTML = '';
            state.shorts.forEach(video => {
                elements.shortsGrid.appendChild(createShortCard(video));
            });
        }

        function createVideoCard(video) {
            const card = document.createElement('div');
            card.className = 'video-card';
            card.dataset.videoId = video.id;
            
            card.innerHTML = `
                <div class="video-thumbnail">
                    <img src="${video.thumbnailUrl}" alt="${video.title}" loading="lazy">
                    <div class="video-duration">${video.duration}</div>
                </div>
                <div class="video-info">
                    <h3 class="video-title">${video.title}</h3>
                    <div class="video-creator">
                        <div class="creator-avatar">${video.creatorName.charAt(0)}</div>
                        <span>${video.creatorName}</span>
                    </div>
                    <div class="video-stats">
                        <span class="stat-item">
                            <i class="fas fa-eye"></i> ${formatNumber(video.views)}
                        </span>
                        <span class="stat-item">
                            <i class="fas fa-thumbs-up"></i> ${formatNumber(video.likes)}
                        </span>
                        <span class="stat-item">
                            <i class="fas fa-thumbs-down"></i> ${formatNumber(video.dislikes)}
                        </span>
                    </div>
                </div>
            `;
            
            card.addEventListener('click', () => playVideo(video));
            return card;
        }

        function createShortCard(video) {
            const card = document.createElement('div');
            card.className = 'short-card';
            card.dataset.videoId = video.id;
            
            card.innerHTML = `
                <div class="short-thumbnail">
                    <img src="${video.thumbnailUrl}" alt="${video.title}" loading="lazy">
                    <div class="video-duration">${video.duration}</div>
                </div>
                <div class="short-info">
                    <h4 class="short-title">${video.title}</h4>
                    <div class="short-stats">
                        <span>${formatNumber(video.views)} views</span>
                        <span> ${formatNumber(video.likes)}</span>
                    </div>
                </div>
            `;
            
            card.addEventListener('click', () => playVideo(video));
            return card;
        }

        // ============================
        // VIDEO PLAYER
        // ============================
        function playVideo(video) {
            state.currentVideo = video;
            
            updateViewCount(video.id);
            updateVideoInfoPanel(video);
            updateLikeDislikeButtons(video.id);
            
            elements.videoPlayerModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            initializePlayer(video);
        }

        function updateVideoInfoPanel(video) {
            elements.videoInfoPanel.innerHTML = `
                <div class="video-info-title">${video.title}</div>
                <div class="video-info-meta">
                    <div class="video-info-creator">
                        <div class="creator-avatar">${video.creatorName.charAt(0)}</div>
                        <span>${video.creatorName}</span>
                    </div>
                    <span>${formatNumber(video.views)} views</span>
                    <span> ${formatNumber(video.likes)}</span>
                    <span> ${formatNumber(video.dislikes)}</span>
                </div>
            `;
        }

        function updateLikeDislikeButtons(videoId) {
            const video = state.currentVideo;
            if (!video) return;
            
            elements.likeCount.textContent = formatNumber(video.likes);
            elements.dislikeCount.textContent = formatNumber(video.dislikes);
            
            if (state.isAuthenticated) {
                if (state.userLikes.has(videoId)) {
                    elements.likeVideoBtn.classList.add('active');
                    elements.likeVideoBtn.querySelector('i').className = 'fas fa-thumbs-up';
                } else {
                    elements.likeVideoBtn.classList.remove('active');
                    elements.likeVideoBtn.querySelector('i').className = 'far fa-thumbs-up';
                }
                
                if (state.userDislikes.has(videoId)) {
                    elements.dislikeVideoBtn.classList.add('active');
                    elements.dislikeVideoBtn.querySelector('i').className = 'fas fa-thumbs-down';
                } else {
                    elements.dislikeVideoBtn.classList.remove('active');
                    elements.dislikeVideoBtn.querySelector('i').className = 'far fa-thumbs-down';
                }
            } else {
                elements.likeVideoBtn.classList.remove('active');
                elements.likeVideoBtn.querySelector('i').className = 'far fa-thumbs-up';
                elements.dislikeVideoBtn.classList.remove('active');
                elements.dislikeVideoBtn.querySelector('i').className = 'far fa-thumbs-down';
            }
        }

        function initializePlayer(video) {
            const container = document.getElementById('fluid-player');
            container.innerHTML = '';
            
            const videoElement = document.createElement('video');
            videoElement.id = 'my-video';
            videoElement.style.width = '100%';
            videoElement.style.height = 'auto';
            
            const source = document.createElement('source');
            source.src = video.videoUrl;
            source.type = 'video/mp4';
            videoElement.appendChild(source);
            container.appendChild(videoElement);
            
            // Initialize Fluid Player with multiple ads
            state.videoPlayer = fluidPlayer('my-video', {
                layoutControls: {
                    primaryColor: "#FF0000",
                    posterImage: video.thumbnailUrl,
                    fillToContainer: true,
                    autoPlay: true,
                    title: video.title
                },
                vastOptions: {
                    adList: [
                        { roll: 'preRoll', vastTag: CONFIG.ads.preRoll },
                        { roll: 'midRoll', vastTag: CONFIG.ads.midRoll, timer: 30 },
                        { roll: 'postRoll', vastTag: CONFIG.ads.postRoll1 },
                        { roll: 'postRoll', vastTag: CONFIG.ads.postRoll2 }
                    ],
                    adCTAText: true,
                    skipButtonCaption: 'Skip Ad [seconds]'
                }
            });
        }

        async function updateViewCount(videoId) {
            try {
                const Video = Parse.Object.extend('Video');
                const query = new Parse.Query(Video);
                const video = await query.get(videoId);
                
                video.increment('views');
                await video.save();
                
                // Update local state
                const videoIndex = state.videos.findIndex(v => v.id === videoId);
                if (videoIndex !== -1) {
                    state.videos[videoIndex].views++;
                }
                
                const shortIndex = state.shorts.findIndex(v => v.id === videoId);
                if (shortIndex !== -1) {
                    state.shorts[shortIndex].views++;
                }
                
                if (state.currentVideo && state.currentVideo.id === videoId) {
                    state.currentVideo.views++;
                    updateVideoInfoPanel(state.currentVideo);
                }
                
            } catch (error) {
                console.error('Error updating views:', error);
            }
        }

        // ============================
        // LIKE/DISLIKE FUNCTIONS
        // ============================
        async function toggleLike() {
            if (!state.currentVideo) return;
            
            if (!state.isAuthenticated) {
                showToast('Please sign in to like videos', 'info');
                showAuthModal();
                return;
            }
            
            const videoId = state.currentVideo.id;
            const userId = state.user.uid;
            
            try {
                const Video = Parse.Object.extend('Video');
                const videoQuery = new Parse.Query(Video);
                const video = await videoQuery.get(videoId);
                
                const Like = Parse.Object.extend('Like');
                const likeQuery = new Parse.Query(Like);
                likeQuery.equalTo('videoId', videoId);
                likeQuery.equalTo('userId', userId);
                
                const existingLike = await likeQuery.first();
                
                // If user had disliked, remove dislike first
                if (state.userDislikes.has(videoId)) {
                    await removeDislike(videoId, userId, video);
                }
                
                if (existingLike) {
                    // Unlike
                    await existingLike.destroy();
                    video.increment('likes', -1);
                    state.userLikes.delete(videoId);
                } else {
                    // Like
                    const like = new Like();
                    like.set('videoId', videoId);
                    like.set('userId', userId);
                    like.set('createdAt', new Date());
                    await like.save();
                    
                    video.increment('likes');
                    state.userLikes.add(videoId);
                }
                
                await video.save();
                
                // Update local state
                const updatedVideo = await videoQuery.get(videoId);
                if (state.currentVideo.id === videoId) {
                    state.currentVideo.likes = updatedVideo.get('likes');
                    state.currentVideo.dislikes = updatedVideo.get('dislikes');
                }
                
                updateLikeDislikeButtons(videoId);
                showToast(existingLike ? 'Video unliked' : 'Video liked!', 'success');
                
            } catch (error) {
                console.error('Like error:', error);
                showToast('Error updating like', 'error');
            }
        }

        async function toggleDislike() {
            if (!state.currentVideo) return;
            
            if (!state.isAuthenticated) {
                showToast('Please sign in to dislike videos', 'info');
                showAuthModal();
                return;
            }
            
            const videoId = state.currentVideo.id;
            const userId = state.user.uid;
            
            try {
                const Video = Parse.Object.extend('Video');
                const videoQuery = new Parse.Query(Video);
                const video = await videoQuery.get(videoId);
                
                const Dislike = Parse.Object.extend('Dislike');
                const dislikeQuery = new Parse.Query(Dislike);
                dislikeQuery.equalTo('videoId', videoId);
                dislikeQuery.equalTo('userId', userId);
                
                const existingDislike = await dislikeQuery.first();
                
                // If user had liked, remove like first
                if (state.userLikes.has(videoId)) {
                    await removeLike(videoId, userId, video);
                }
                
                if (existingDislike) {
                    // Remove dislike
                    await existingDislike.destroy();
                    video.increment('dislikes', -1);
                    state.userDislikes.delete(videoId);
                } else {
                    // Add dislike
                    const dislike = new Dislike();
                    dislike.set('videoId', videoId);
                    dislike.set('userId', userId);
                    dislike.set('createdAt', new Date());
                    await dislike.save();
                    
                    video.increment('dislikes');
                    state.userDislikes.add(videoId);
                }
                
                await video.save();
                
                // Update local state
                const updatedVideo = await videoQuery.get(videoId);
                if (state.currentVideo.id === videoId) {
                    state.currentVideo.likes = updatedVideo.get('likes');
                    state.currentVideo.dislikes = updatedVideo.get('dislikes');
                }
                
                updateLikeDislikeButtons(videoId);
                showToast(existingDislike ? 'Dislike removed' : 'Video disliked', 'info');
                
            } catch (error) {
                console.error('Dislike error:', error);
                showToast('Error updating dislike', 'error');
            }
        }

        async function removeLike(videoId, userId, video) {
            const Like = Parse.Object.extend('Like');
            const likeQuery = new Parse.Query(Like);
            likeQuery.equalTo('videoId', videoId);
            likeQuery.equalTo('userId', userId);
            
            const like = await likeQuery.first();
            if (like) {
                await like.destroy();
                video.increment('likes', -1);
                state.userLikes.delete(videoId);
            }
        }

        async function removeDislike(videoId, userId, video) {
            const Dislike = Parse.Object.extend('Dislike');
            const dislikeQuery = new Parse.Query(Dislike);
            dislikeQuery.equalTo('videoId', videoId);
            dislikeQuery.equalTo('userId', userId);
            
            const dislike = await dislikeQuery.first();
            if (dislike) {
                await dislike.destroy();
                video.increment('dislikes', -1);
                state.userDislikes.delete(videoId);
            }
        }

        // ============================
        // SHARE FUNCTIONS
        // ============================
        function showShareModal(video) {
            if (!video) return;
            
            const videoUrl = `${window.location.origin}/watch?id=${video.id}`;
            
            elements.sharePreview.innerHTML = `
                <img src="${video.thumbnailUrl}" alt="${video.title}" class="share-thumbnail">
                <div class="share-info">
                    <h4>${video.title}</h4>
                    <p>${formatNumber(video.views)} views  ${video.creatorName}</p>
                </div>
            `;
            
            elements.shareLink.value = videoUrl;
            elements.shareModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            setupPlatformSharing(video, videoUrl);
        }

        function setupPlatformSharing(video, videoUrl) {
            const encodedUrl = encodeURIComponent(videoUrl);
            const encodedTitle = encodeURIComponent(video.title);
            const encodedImage = encodeURIComponent(video.thumbnailUrl);
            
            const platforms = {
                whatsapp: `https://wa.me/?text=${encodedTitle}%20-%20${encodedUrl}`,
                telegram: `https://t.me/share/url?url=${encodedUrl}&text=${encodedTitle}`,
                tiktok: `https://www.tiktok.com/upload?refer=embed&video_url=${encodedUrl}`,
                instagram: `https://www.instagram.com/create/story/?video_url=${encodedUrl}`,
                pinterest: `https://pinterest.com/pin/create/button/?url=${encodedUrl}&description=${encodedTitle}&media=${encodedImage}`,
                facebook: `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}&quote=${encodedTitle}`
            };
            
            document.querySelectorAll('.share-platform').forEach(btn => {
                btn.removeEventListener('click', handlePlatformClick);
                btn.addEventListener('click', handlePlatformClick);
            });
            
            function handlePlatformClick(e) {
                const platform = e.currentTarget.dataset.platform;
                const url = platforms[platform];
                if (url) {
                    window.open(url, '_blank', 'width=600,height=400');
                }
            }
        }

        // ============================
        // SEARCH SUGGESTIONS
        // ============================
        function setupSearchSuggestions() {
            elements.searchInput.addEventListener('input', handleSearchInput);
            elements.searchInput.addEventListener('focus', showSuggestions);
            elements.searchInput.addEventListener('blur', () => {
                setTimeout(() => hideSuggestions(), 200);
            });
            
            elements.searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch(elements.searchInput.value);
                    hideSuggestions();
                }
            });
            
            elements.searchButton.addEventListener('click', () => {
                performSearch(elements.searchInput.value);
                hideSuggestions();
            });
        }

        function handleSearchInput() {
            const query = elements.searchInput.value.trim();
            
            clearTimeout(state.searchTimeout);
            
            if (query.length < 2) {
                showPopularSearches();
                return;
            }
            
            state.searchTimeout = setTimeout(() => {
                fetchSuggestions(query);
            }, 300);
        }

        async function fetchSuggestions(query) {
            try {
                const Video = Parse.Object.extend('Video');
                const searchQuery = new Parse.Query(Video);
                searchQuery.contains('title', query);
                searchQuery.limit(10);
                
                const results = await searchQuery.find();
                const videos = results.map(videoToObject);
                
                displaySuggestions(videos, query);
            } catch (error) {
                console.error('Error fetching suggestions:', error);
                showPopularSearches();
            }
        }

        function displaySuggestions(videos, query) {
            const dropdown = elements.suggestionsDropdown;
            dropdown.innerHTML = '';
            
            if (videos.length === 0) {
                showNoResults(query);
                return;
            }
            
            const header = document.createElement('div');
            header.className = 'popular-header';
            header.textContent = 'Suggested Videos';
            dropdown.appendChild(header);
            
            videos.forEach(video => {
                const suggestion = document.createElement('div');
                suggestion.className = 'suggestion-item';
                suggestion.dataset.videoId = video.id;
                
                const title = highlightMatch(video.title, query);
                
                suggestion.innerHTML = `
                    <i class="fas fa-video suggestion-icon"></i>
                    <div class="suggestion-content">
                        <div class="suggestion-title">${title}</div>
                        <div class="suggestion-meta">
                            <span>${formatNumber(video.views)} views</span>
                            <span class="suggestion-type">Video</span>
                        </div>
                    </div>
                `;
                
                suggestion.addEventListener('click', () => {
                    elements.searchInput.value = video.title;
                    hideSuggestions();
                    playVideo(video);
                });
                
                dropdown.appendChild(suggestion);
            });
            
            const searchSuggestion = document.createElement('div');
            searchSuggestion.className = 'suggestion-item';
            searchSuggestion.innerHTML = `
                <i class="fas fa-search suggestion-icon"></i>
                <div class="suggestion-content">
                    <div class="suggestion-title">Search for "${query}"</div>
                </div>
            `;
            
            searchSuggestion.addEventListener('click', () => {
                performSearch(query);
                hideSuggestions();
            });
            
            dropdown.appendChild(searchSuggestion);
            
            showSuggestions();
        }

        function showPopularSearches() {
            const dropdown = elements.suggestionsDropdown;
            dropdown.innerHTML = '';
            
            const header = document.createElement('div');
            header.className = 'popular-header';
            header.textContent = 'Popular Searches';
            dropdown.appendChild(header);
            
            state.popularSearches.forEach(search => {
                const item = document.createElement('div');
                item.className = 'suggestion-item';
                item.innerHTML = `
                    <i class="fas fa-fire suggestion-icon" style="color: var(--primary-red);"></i>
                    <div class="suggestion-content">
                        <div class="suggestion-title">${search}</div>
                    </div>
                `;
                
                item.addEventListener('click', () => {
                    elements.searchInput.value = search;
                    performSearch(search);
                    hideSuggestions();
                });
                
                dropdown.appendChild(item);
            });
            
            showSuggestions();
        }

        function showNoResults(query) {
            const dropdown = elements.suggestionsDropdown;
            dropdown.innerHTML = `
                <div class="suggestion-item">
                    <i class="fas fa-exclamation-circle suggestion-icon"></i>
                    <div class="suggestion-content">
                        <div class="suggestion-title">No results for "${query}"</div>
                    </div>
                </div>
                <div class="suggestion-item" id="searchAnyway">
                    <i class="fas fa-search suggestion-icon"></i>
                    <div class="suggestion-content">
                        <div class="suggestion-title">Search for "${query}" anyway</div>
                    </div>
                </div>
            `;
            
            document.getElementById('searchAnyway').addEventListener('click', () => {
                performSearch(query);
                hideSuggestions();
            });
            
            showSuggestions();
        }

        function highlightMatch(text, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<mark>$1</mark>');
        }

        function showSuggestions() {
            elements.suggestionsDropdown.classList.add('active');
        }

        function hideSuggestions() {
            elements.suggestionsDropdown.classList.remove('active');
        }

        async function performSearch(query) {
            if (!query.trim()) return;
            
            showToast(`Searching for "${query}"...`, 'info');
            
            try {
                await loadVideos(query);
                
                if (window.innerWidth <= 768) {
                    elements.searchWrapper.classList.remove('active');
                }
                
            } catch (error) {
                console.error('Search error:', error);
                showToast('Search failed', 'error');
            }
        }

        // ============================
        // AUTHENTICATION
        // ============================
        async function handleLogin(email, password) {
            try {
                await firebase.auth().signInWithEmailAndPassword(email, password);
                closeAuthModal();
                showToast('Successfully signed in!', 'success');
            } catch (error) {
                console.error('Login error:', error);
                showToast('Login failed: ' + error.message, 'error');
            }
        }

        async function handleSignup(username, email, password) {
            try {
                const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
                await userCredential.user.updateProfile({
                    displayName: username
                });
                closeAuthModal();
                showToast('Account created successfully!', 'success');
            } catch (error) {
                console.error('Signup error:', error);
                showToast('Signup failed: ' + error.message, 'error');
            }
        }

        async function handleGoogleLogin() {
            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                await firebase.auth().signInWithPopup(provider);
                closeAuthModal();
                showToast('Successfully signed in with Google!', 'success');
            } catch (error) {
                console.error('Google login error:', error);
                showToast('Google login failed: ' + error.message, 'error');
            }
        }

        async function logout() {
            try {
                await firebase.auth().signOut();
                showToast('Successfully logged out', 'info');
            } catch (error) {
                console.error('Logout error:', error);
                showToast('Logout failed: ' + error.message, 'error');
            }
        }

        function updateAuthUI() {
            if (state.isAuthenticated) {
                if (state.user.photoURL) {
                    elements.userAvatar.innerHTML = `<img src="${state.user.photoURL}" alt="${state.user.displayName}">`;
                } else {
                    elements.userAvatar.textContent = state.user.displayName.charAt(0).toUpperCase();
                }
                
                elements.logoutButton.style.display = 'flex';
                elements.loginButton.style.display = 'none';
                elements.uploadButton.style.display = 'flex';
                elements.fabUpload.style.display = 'flex';
                
            } else {
                elements.userAvatar.innerHTML = '<i class="fas fa-user"></i>';
                elements.logoutButton.style.display = 'none';
                elements.loginButton.style.display = 'flex';
                elements.uploadButton.style.display = 'none';
                elements.fabUpload.style.display = 'none';
            }
        }

        // ============================
        // VIDEO UPLOAD
        // ============================
        function setupDragAndDrop() {
            const dropzone = elements.uploadDropzone;
            
            dropzone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropzone.classList.add('dragover');
            });
            
            dropzone.addEventListener('dragleave', () => {
                dropzone.classList.remove('dragover');
            });
            
            dropzone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropzone.classList.remove('dragover');
                
                if (e.dataTransfer.files.length) {
                    handleFileSelect(e.dataTransfer.files[0]);
                }
            });
            
            elements.videoFileInput.addEventListener('change', (e) => {
                if (e.target.files.length) {
                    handleFileSelect(e.target.files[0]);
                }
            });
        }

        function handleFileSelect(file) {
            if (!file.type.includes('video/')) {
                showToast('Please select a video file', 'error');
                return;
            }
            
            if (file.size > 2 * 1024 * 1024 * 1024) {
                showToast('File too large. Maximum size is 2GB', 'error');
                return;
            }
            
            const previewURL = URL.createObjectURL(file);
            elements.previewVideo.src = previewURL;
            elements.uploadPreview.style.display = 'block';
            elements.submitUpload.disabled = false;
            
            if (!elements.videoTitle.value.trim()) {
                const filename = file.name.replace(/\.[^/.]+$/, "");
                elements.videoTitle.value = filename;
            }
            
            showToast('Video selected. Ready to upload!', 'success');
        }

        async function uploadVideo() {
            if (state.isUploading) return;
            
            const file = elements.videoFileInput.files[0];
            const title = elements.videoTitle.value.trim();
            const description = elements.videoDescription.value.trim();
            const tags = elements.videoTags.value.split(',').map(tag => tag.trim()).filter(tag => tag);
            const isShort = elements.isShort.checked;
            
            if (!file) {
                showToast('Please select a video file', 'error');
                return;
            }
            
            if (!title) {
                showToast('Please enter a video title', 'error');
                return;
            }
            
            if (!state.isAuthenticated) {
                showToast('Please sign in to upload videos', 'error');
                showAuthModal();
                return;
            }
            
            state.isUploading = true;
            state.uploadProgress = 0;
            
            elements.uploadProgress.style.display = 'block';
            elements.submitUpload.disabled = true;
            elements.submitUpload.textContent = 'Uploading...';
            
            try {
                simulateProgress();
                
                // Upload to Cloudinary
                const formData = new FormData();
                formData.append('file', file);
                formData.append('upload_preset', CONFIG.cloudinary.uploadPreset);
                formData.append('cloud_name', CONFIG.cloudinary.cloudName);
                formData.append('tags', 'haitiantube');
                
                const response = await fetch(`https://api.cloudinary.com/v1_1/${CONFIG.cloudinary.cloudName}/video/upload`, {
                    method: 'POST',
                    body: formData
                });
                
                if (!response.ok) throw new Error('Upload failed');
                
                const cloudinaryData = await response.json();
                
                const videoUrl = cloudinaryData.secure_url;
                const thumbnailUrl = cloudinaryData.secure_url.replace(/\.(mp4|mov|avi|webm|mkv)$/, '.jpg');
                const duration = Math.round(cloudinaryData.duration);
                
                // Save to Parse
                const Video = Parse.Object.extend('Video');
                const video = new Video();
                
                video.set('title', title);
                video.set('description', description);
                video.set('videoUrl', videoUrl);
                video.set('thumbnailUrl', thumbnailUrl);
                video.set('creatorId', state.user.uid);
                video.set('creatorName', state.user.displayName);
                video.set('views', 0);
                video.set('likes', 0);
                video.set('dislikes', 0);
                video.set('duration', formatDuration(duration));
                video.set('isShort', isShort);
                video.set('tags', tags);
                
                await video.save();
                
                state.uploadProgress = 100;
                updateProgressBar();
                
                showToast('Video uploaded successfully!', 'success');
                
                setTimeout(() => {
                    closeUploadModal();
                    loadContent();
                }, 2000);
                
            } catch (error) {
                console.error('Upload error:', error);
                showToast('Upload failed: ' + error.message, 'error');
                state.isUploading = false;
                elements.submitUpload.disabled = false;
                elements.submitUpload.textContent = 'Upload Video';
                elements.uploadProgress.style.display = 'none';
            }
        }

        function simulateProgress() {
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress >= 90) {
                    progress = 90;
                    clearInterval(interval);
                }
                state.uploadProgress = Math.min(progress, 90);
                updateProgressBar();
            }, 200);
        }

        function updateProgressBar() {
            elements.progressFill.style.width = state.uploadProgress + '%';
            elements.progressPercent.textContent = Math.round(state.uploadProgress) + '%';
        }

        // ============================
        // MODAL MANAGEMENT
        // ============================
        function showAuthModal() {
            elements.authModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeAuthModal() {
            elements.authModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            resetAuthForms();
        }

        function showUploadModal() {
            if (!state.isAuthenticated) {
                showToast('Please sign in to upload videos', 'error');
                showAuthModal();
                return;
            }
            
            elements.uploadModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeUploadModal() {
            elements.uploadModal.style.display = 'none';
            document.body.style.overflow = 'auto';
            resetUploadForm();
        }

        function resetAuthForms() {
            elements.loginForm.reset();
            elements.signupForm.reset();
            elements.loginForm.style.display = 'block';
            elements.signupForm.style.display = 'none';
            elements.authTabs[0].classList.add('active');
            elements.authTabs[1].classList.remove('active');
        }

        function resetUploadForm() {
            elements.videoFileInput.value = '';
            elements.videoTitle.value = '';
            elements.videoDescription.value = '';
            elements.videoTags.value = '';
            elements.isShort.checked = false;
            elements.uploadPreview.style.display = 'none';
            elements.uploadProgress.style.display = 'none';
            elements.submitUpload.disabled = true;
            elements.submitUpload.textContent = 'Upload Video';
            state.isUploading = false;
            state.uploadProgress = 0;
        }

        // ============================
        // EVENT LISTENERS
        // ============================
        function setupEventListeners() {
            // Menu toggle
            elements.menuToggle.addEventListener('click', () => {
                elements.sidebar.classList.toggle('active');
            });
            
            // Search toggle
            elements.searchToggle.addEventListener('click', () => {
                elements.searchWrapper.classList.toggle('active');
                if (elements.searchWrapper.classList.contains('active')) {
                    elements.searchInput.focus();
                }
            });
            
            // Close player
            elements.closePlayer.addEventListener('click', () => {
                elements.videoPlayerModal.style.display = 'none';
                document.body.style.overflow = 'auto';
                if (state.videoPlayer) {
                    state.videoPlayer.destroy();
                    state.videoPlayer = null;
                }
            });
            
            // Like/Dislike buttons
            elements.likeVideoBtn.addEventListener('click', toggleLike);
            elements.dislikeVideoBtn.addEventListener('click', toggleDislike);
            
            // Share button
            elements.shareVideoBtn.addEventListener('click', () => {
                if (state.currentVideo) {
                    showShareModal(state.currentVideo);
                }
            });
            
            // Copy link button
            elements.copyLinkBtn.addEventListener('click', async () => {
                try {
                    await navigator.clipboard.writeText(elements.shareLink.value);
                    showToast('Link copied to clipboard!', 'success');
                } catch (err) {
                    showToast('Failed to copy link', 'error');
                }
            });
            
            // Close share modal
            elements.closeShare.addEventListener('click', () => {
                elements.shareModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            });
            
            // Navigation
            elements.navItems.forEach(item => {
                item.addEventListener('click', () => {
                    elements.navItems.forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    
                    const view = item.dataset.view;
                    if (view) switchView(view);
                    
                    if (window.innerWidth <= 768) {
                        elements.sidebar.classList.remove('active');
                    }
                });
            });
            
            // Authentication
            elements.loginButton.addEventListener('click', showAuthModal);
            elements.logoutButton.addEventListener('click', logout);
            elements.userAvatar.addEventListener('click', () => {
                if (!state.isAuthenticated) showAuthModal();
            });
            
            // Auth tabs
            elements.authTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    elements.authTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    if (tab.dataset.tab === 'login') {
                        elements.loginForm.style.display = 'block';
                        elements.signupForm.style.display = 'none';
                    } else {
                        elements.loginForm.style.display = 'none';
                        elements.signupForm.style.display = 'block';
                    }
                });
            });
            
            // Auth forms
            elements.loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                handleLogin(elements.loginEmail.value, elements.loginPassword.value);
            });
            
            elements.signupForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const password = elements.signupPassword.value;
                const confirm = elements.signupConfirmPassword.value;
                
                if (password !== confirm) {
                    showToast('Passwords do not match', 'error');
                    return;
                }
                
                handleSignup(
                    elements.signupUsername.value,
                    elements.signupEmail.value,
                    password
                );
            });
            
            elements.googleSignIn.addEventListener('click', handleGoogleLogin);
            
            // Upload
            elements.uploadButton.addEventListener('click', showUploadModal);
            elements.fabUpload.addEventListener('click', showUploadModal);
            elements.uploadFirstVideo.addEventListener('click', showUploadModal);
            elements.uploadDropzone.addEventListener('click', () => {
                elements.videoFileInput.click();
            });
            elements.cancelUpload.addEventListener('click', closeUploadModal);
            elements.submitUpload.addEventListener('click', uploadVideo);
            
            // Setup drag and drop
            setupDragAndDrop();
            
            // Close modals on outside click
            window.addEventListener('click', (e) => {
                if (e.target === elements.authModal) closeAuthModal();
                if (e.target === elements.uploadModal) closeUploadModal();
                if (e.target === elements.shareModal) {
                    elements.shareModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
                if (e.target === elements.videoPlayerModal) {
                    elements.videoPlayerModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    if (state.videoPlayer) {
                        state.videoPlayer.destroy();
                        state.videoPlayer = null;
                    }
                }
            });
            
            // Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeAuthModal();
                    closeUploadModal();
                    elements.shareModal.style.display = 'none';
                    elements.videoPlayerModal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    if (state.videoPlayer) {
                        state.videoPlayer.destroy();
                        state.videoPlayer = null;
                    }
                }
            });
        }

        function switchView(view) {
            state.currentView = view;
            
            switch(view) {
                case 'home':
                    loadContent();
                    break;
                case 'shorts':
                    loadShorts();
                    break;
                case 'liked':
                    if (state.isAuthenticated) {
                        loadLikedVideos();
                    } else {
                        showToast('Please sign in to view liked videos', 'info');
                        showAuthModal();
                    }
                    break;
            }
        }

        async function loadLikedVideos() {
            if (!state.isAuthenticated) return;
            
            elements.loadingState.style.display = 'flex';
            
            try {
                const Like = Parse.Object.extend('Like');
                const likeQuery = new Parse.Query(Like);
                likeQuery.equalTo('userId', state.user.uid);
                const likes = await likeQuery.find();
                
                const videoIds = likes.map(like => like.get('videoId'));
                
                const Video = Parse.Object.extend('Video');
                const videoQuery = new Parse.Query(Video);
                videoQuery.containedIn('objectId', videoIds);
                
                const results = await videoQuery.find();
                state.videos = results.map(videoToObject);
                
                displayVideos();
                elements.loadingState.style.display = 'none';
                
            } catch (error) {
                console.error('Error loading liked videos:', error);
                elements.loadingState.style.display = 'none';
                showToast('Error loading liked videos', 'error');
            }
        }

        // ============================
        // SEO FUNCTIONS
        // ============================
        function checkUrlForVideo() {
            const urlParams = new URLSearchParams(window.location.search);
            const videoId = urlParams.get('id');
            
            if (videoId) {
                loadVideoById(videoId);
            }
        }

        async function loadVideoById(videoId) {
            try {
                const Video = Parse.Object.extend('Video');
                const query = new Parse.Query(Video);
                const video = await query.get(videoId);
                
                if (video) {
                    const videoObj = videoToObject(video);
                    playVideo(videoObj);
                    updateMetaTags(videoObj);
                }
            } catch (error) {
                console.error('Error loading video by ID:', error);
            }
        }

        function updateMetaTags(video) {
            if (video) {
                document.title = `${video.title} - Haitian Tube`;
                
                let metaDesc = document.querySelector('meta[name="description"]');
                if (metaDesc) {
                    metaDesc.setAttribute('content', video.description.substring(0, 160));
                }
                
                let ogTitle = document.querySelector('meta[property="og:title"]');
                if (ogTitle) {
                    ogTitle.setAttribute('content', video.title);
                }
                
                let ogDesc = document.querySelector('meta[property="og:description"]');
                if (ogDesc) {
                    ogDesc.setAttribute('content', video.description.substring(0, 200));
                }
                
                let ogImage = document.querySelector('meta[property="og:image"]');
                if (ogImage) {
                    ogImage.setAttribute('content', video.thumbnailUrl);
                }
                
                let ogUrl = document.querySelector('meta[property="og:url"]');
                if (ogUrl) {
                    ogUrl.setAttribute('content', `${window.location.origin}/watch?id=${video.id}`);
                }
            }
        }

        // ============================
        // UTILITY FUNCTIONS
        // ============================
        function formatNumber(num) {
            if (!num) return '0';
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
        }

        function formatDuration(seconds) {
            if (!seconds) return '0:00';
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function showToast(message, type = 'info') {
            elements.toastMessage.textContent = message;
            elements.toast.className = `toast toast-${type} show`;
            
            setTimeout(() => {
                elements.toast.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
